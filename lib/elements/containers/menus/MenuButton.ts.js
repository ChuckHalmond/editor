(()=>{"use strict";var e={9372:(e,t,n)=>{n.d(t,{GF:()=>o,bG:()=>a,b_:()=>i,en:()=>c});var s=n(4141),r=n(1827);const o=function(e){return(t,n)=>{const{constructor:s}=t,{prototype:o}=s,i=String(n),{defaultValue:c=null,observed:a=!1,name:h=(0,r.cc)(i)}=e;if(a){const e=Reflect.get(s,"observedAttributes",s);Array.isArray(e)?e.push(h):Object.defineProperty(s,"observedAttributes",{value:[h],writable:!1})}const{type:l}=e;switch(l){case Boolean:Object.defineProperty(o,i,{get:function(){return this.hasAttribute(h)},set:function(e){e?this.setAttribute(h,""):this.removeAttribute(h)}});break;case Object:Object.defineProperty(o,i,{get:function(){const e=this.getAttribute(h);return null!==e?JSON.parse(e):c},set:function(e){null!==e?this.setAttribute(h,JSON.stringify(e)):this.removeAttribute(h)}});break;case Number:Object.defineProperty(o,i,{get:function(){const e=this.getAttribute(h);return null!==e?parseFloat(e):c},set:function(e){null!==e?this.setAttribute(h,e):this.removeAttribute(h)}});break;default:Object.defineProperty(o,i,{get:function(){const e=this.getAttribute(h);return null!==e?e:c},set:function(e){null!==e?this.setAttribute(h,e):this.removeAttribute(h)}})}}},i=function(e){return t=>{const{name:n,options:s}=e;return customElements.get(n)||customElements.define(n,t,s),t}},c=function(e){return(t,n)=>{const{constructor:s}=t,{prototype:r}=s,o=String(n),{selector:i}=e,c=e.withinShadowRoot?function(){return this.shadowRoot.querySelector(i)}:function(){return this.querySelector(i)};Object.defineProperty(r,o,{get:c})}};function a(e,t){if(t){const{options:n,attributes:s,dataset:o,children:i,listeners:c}=t,a=document.createElement(e,n);if(s&&Object.entries(s).forEach((([e,t])=>{void 0!==t&&("boolean"==typeof t?a.toggleAttribute((0,r.cc)(e),t):a.setAttribute((0,r.cc)(e),String(t)))})),o){const{dataset:e}=a;Object.keys(o).forEach((t=>{e[t]=String(o[t])}))}return i&&("function"==typeof i?i(a):"object"==typeof i&&"length"in i?a.append(...Array.from(i)):a.append(i)),c&&Object.entries(c).forEach((([e,t])=>{Array.isArray(t)?a.addEventListener(e,t[0],t[1]):a.addEventListener(e,t)})),a}return document.createElement(e)}const h=new WeakMap;new FinalizationRegistry((e=>{const{model:t,reactiveElement:n}=e,s=h.get(t);if(void 0!==s){const{reactiveElementsArray:e}=s;e.splice(e.indexOf(n),1)}})),new s.KY((e=>{e.forEach((e=>{const{target:t,propertyName:n,oldValue:s,newValue:r}=e,{reactiveElementsArray:o}=h.get(t);o.forEach((e=>{const{elementRef:t,react:o,properties:i}=e,c=t.deref();c&&i.includes(n)&&o(c,n,s,r)}))}))}));const l=new WeakMap;new FinalizationRegistry((e=>{const{list:t,reactiveChildElement:n}=e,s=l.get(t);if(s){const{reactiveChildElementsArray:e}=s;e.splice(e.indexOf(n),1)}})),new s.KY((e=>{let t=null;Array.from(e.values()).forEach((e=>{const{target:n}=e,s=n,{length:r}=s,{reactiveChildElementsArray:o}=l.get(s);o.forEach((n=>{const{parentRef:s,mapping:o,placeholder:i}=n,c=s.deref();if(c){const{firstChild:n,children:s}=c,{length:a}=s;i&&r>0&&n==i&&c.removeChild(i);const{changeType:h,LIST_INSERT:l,LIST_REMOVE:d,LIST_SORT:p}=e;switch(h){case l:{const{insertedIndex:t,insertedItems:n}=e,r=Array.from(n.values()).map(o),{length:i}=s;t<i?s[t].before(...r):c.append(...r);break}case d:{const{removedIndex:n,removedItems:r}=e,{length:o}=r;t=t??document.createRange();const i=n+(o-1);i<a&&(t.setStartBefore(s[n]),t.setEndAfter(s[i]),t.deleteContents());break}case p:{const{sortedIndices:t}=e,n=Array.from(s);c.append(...t.filter((e=>e<a)).map((e=>n[e])));break}}0==r&&i&&c.append(i)}}))}))}))},1827:(e,t,n)=>{function s(e){return e.replace(/(?<!^)(?=[A-Z])/g,"-").toLowerCase()}n.d(t,{cc:()=>s})},4141:(e,t,n)=>{n.d(t,{KY:()=>C});var s,r,o,i,c,a,h,l,d,p,f,u,g,m,v,b,w,y,E,T=function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},I=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};class R{constructor(e){this.target=e.target,this.changeType=e.changeType,this.propertyName=e.propertyName??null,this.oldValue=e.oldValue??void 0,this.newValue=e.newValue??void 0,this.removedIndex=e.removedIndex??0,this.removedItems=new x(e.removedItems??[]),this.insertedIndex=e.insertedIndex??0,this.insertedItems=new x(e.insertedItems??[]),this.sortedIndices=e.sortedIndices??[]}static get PROPERTY_CHANGE(){return 1}static get LIST_REMOVE(){return 2}static get LIST_INSERT(){return 3}static get LIST_SORT(){return 4}get PROPERTY_CHANGE(){return R.PROPERTY_CHANGE}get LIST_REMOVE(){return R.LIST_REMOVE}get LIST_INSERT(){return R.LIST_INSERT}get LIST_SORT(){return R.LIST_SORT}}var S=R;s=new WeakMap;var x=class{constructor(e){s.set(this,void 0),T(this,s,e.slice(),"f")}get length(){return I(this,s,"f").length}item(e){return I(this,s,"f")[e]??null}values(){return I(this,s,"f").values()}};class A{constructor(e){r.set(this,void 0),o.set(this,void 0),this.type=e,T(this,r,null,"f"),T(this,o,null,"f")}get currentTarget(){return I(this,r,"f")}get target(){return I(this,o,"f")}}r=new WeakMap,o=new WeakMap,A.ModelEventTargetAccessor=new class{setCurrentTarget(e,t){e instanceof A&&T(e,r,t,"f")}setTarget(e,t){e instanceof A&&T(e,o,t,"f")}};var P=A.ModelEventTargetAccessor;delete A.ModelEventTargetAccessor;var O=A;class M{constructor(){i.set(this,void 0),T(this,i,new Map,"f")}receiveEvent(e){const{type:t}=e,n=I(this,i,"f").get(t);P.setCurrentTarget(e,this),n&&n.forEach((t=>{t(e)}))}addEventListener(e,t){const n=I(this,i,"f").get(e);n?n.push(t):I(this,i,"f").set(e,[t])}removeEventListener(e,t){const n=I(this,i,"f").get(e);if(n){const s=n.findIndex((e=>e==t));s>-1&&n.splice(s,1),0==n.length&&I(this,i,"f").delete(e)}}dispatchEvent(e){P.setTarget(e,this),this.receiveEvent(e)}}i=new WeakMap;class k extends M{constructor(){super(),c.add(this),a.set(this,void 0),h.set(this,void 0),l.set(this,void 0),T(this,a,null,"f"),T(this,h,[],"f"),T(this,l,!1,"f")}get parentNode(){return I(this,a,"f")}setParent(e){if(null!==e){let t=e==this,{parentNode:n}=e;for(;!t&&null!==n;)({parentNode:n}=n),t=n==this;if(t)throw new TypeError("Failed to set parent on ModelNode: circular reference detected in the hierarchy.");T(this,a,e,"f")}else T(this,a,null,"f")}beginChanges(){T(this,l,!0,"f")}endChanges(){this.dispatchEvent(new O("modelchange")),I(this,h,"f").splice(0),T(this,l,!1,"f")}getRecords(){return I(this,h,"f").slice()}receiveEvent(e){super.receiveEvent(e);const{parentNode:t}=this;t&&t.receiveEvent(e)}}a=new WeakMap,h=new WeakMap,l=new WeakMap,c=new WeakSet,d=function(e,t,n){const s=I(this,h,"f"),r=new S({target:this,changeType:S.PROPERTY_CHANGE,propertyName:e,oldValue:t,newValue:n});s.push(r),I(this,l,"f")||(this.dispatchEvent(new O("modelchange")),s.splice(0))},p=function(e){I(this,h,"f").push(e),I(this,l,"f")||(this.dispatchEvent(new O("modelchange")),I(this,h,"f").splice(0))},k.ModelNodeRecordsAccessor=new class{triggerChange(e,t,n,s){e instanceof k&&I(e,c,"m",d).call(e,t,n,s)}handleRecord(e,t){e instanceof k&&I(e,c,"m",p).call(e,t)}};var N=k.ModelNodeRecordsAccessor;delete k.ModelNodeRecordsAccessor;var L=k;class _ extends k{constructor(){super(),f.set(this,void 0),T(this,f,new Map,"f")}}f=new WeakMap,_.ModelObjectPropertiesAccessor=new class{setProperty(e,t,n){e instanceof _&&I(e,f,"f").set(t,n)}getProperty(e,t){if(e instanceof _)return I(e,f,"f").get(t)}},_.ModelObjectPropertiesAccessor,delete _.ModelObjectPropertiesAccessor,u=new WeakMap;var j=class extends k{constructor(e){super(),u.set(this,void 0),T(this,u,e?.slice()??[],"f")}setParent(e){super.setParent(e),I(this,u,"f").forEach((t=>{t.setParent(e)}))}get length(){return I(this,u,"f").length}get(e){return I(this,u,"f")[e]??null}index(e){return I(this,u,"f").indexOf(e)}values(){return I(this,u,"f").values()}sort(e){const t=I(this,u,"f").map(((e,t)=>({item:e,index:t})));t.sort(((t,n)=>e(t.item,n.item))),T(this,u,t.map((e=>e.item)),"f");const n=new S({target:this,changeType:S.LIST_SORT,sortedIndices:t.map((e=>e.index))});N.handleRecord(this,n)}prepend(...e){const t=I(this,u,"f"),{parentNode:n}=this;n&&e.forEach((e=>{e.setParent(n)})),t.splice(0,0,...e);const s=new S({target:this,changeType:S.LIST_INSERT,insertedIndex:0,insertedItems:e});N.handleRecord(this,s)}append(...e){const t=I(this,u,"f"),{length:n}=t,{parentNode:s}=this;s&&e.forEach((e=>{e.setParent(s)})),t.push(...e);const r=new S({target:this,changeType:S.LIST_INSERT,insertedIndex:n,insertedItems:e});N.handleRecord(this,r)}insert(e,...t){const n=I(this,u,"f"),{length:s}=n;if(Math.abs(e)<=s){if(e>=0){const{parentNode:r}=this;t.forEach((e=>{e.setParent(r)})),e<s?n.splice(e,0,...t):n.push(...t)}else if(e<0){e=s-e;const{parentNode:r}=this;r&&t.forEach((e=>{e.setParent(r)})),n.splice(e,0,...t)}const r=new S({target:this,changeType:S.LIST_INSERT,insertedIndex:e,insertedItems:t.slice()});N.handleRecord(this,r)}}remove(e){const t=I(this,u,"f"),n=t.indexOf(e);if(n>-1){const e=t.splice(n,1)[0],{parentNode:s}=this;s&&e.setParent(null);const r=new S({target:this,changeType:S.LIST_REMOVE,removedIndex:n,removedItems:[e]});N.handleRecord(this,r)}}clear(){const e=I(this,u,"f"),{length:t}=e;if(t>0){const t=e.splice(0),{parentNode:n}=this;n&&t.forEach((e=>{e.setParent(null)}));const s=new S({target:this,changeType:S.LIST_REMOVE,removedIndex:0,removedItems:t});N.handleRecord(this,s)}}};m=new WeakMap,v=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakSet,y=function(){const e=I(this,v,"f").splice(0);e.length>0&&I(this,m,"f").call(this,e)},E=function(e){if(!I(this,b,"f")){const{target:t,currentTarget:n}=e,s=I(this,w,"f").get(n);if(s){const{options:e}=s,{properties:r,propertiesFilter:o,childList:i,subtree:c}=e;c?r&&t instanceof L?(o?I(this,v,"f").push(...t.getRecords().filter((e=>{const{propertyName:t}=e;return o.includes(t)}))):I(this,v,"f").push(...t.getRecords()),I(this,g,"m",y).call(this)):i&&t instanceof j&&(I(this,v,"f").push(...t.getRecords()),I(this,g,"m",y).call(this)):t==n&&(r&&t instanceof L?(o?I(this,v,"f").push(...t.getRecords().filter((e=>{const{propertyName:t}=e;return o.includes(t)}))):I(this,v,"f").push(...t.getRecords()),I(this,g,"m",y).call(this)):i&&t instanceof j&&(I(this,v,"f").push(...t.getRecords()),I(this,g,"m",y).call(this)))}}};var C=class{constructor(e){g.add(this),m.set(this,void 0),v.set(this,void 0),b.set(this,void 0),w.set(this,void 0),T(this,m,e,"f"),T(this,v,[],"f"),T(this,b,!1,"f"),T(this,w,new WeakMap,"f")}observe(e,t){T(this,b,!1,"f");const n=I(this,w,"f");let s=n.get(e);if(s)n.set(e,s);else{const r=I(this,g,"m",E).bind(this);e.addEventListener("modelchange",r),s={listener:r,options:t},n.set(e,s)}}unobserve(e){let t=I(this,w,"f").get(e);if(t){const{listener:n}=t;e.removeEventListener("modelchange",n)}}disconnect(){I(this,v,"f").splice(0),T(this,b,!0,"f")}}}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e,t,s,r,o,i,c,a=n(9372),h=function(e,t,n,s){var r,o=arguments.length,i=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,n,i):r(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},l=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};let d=class extends HTMLElement{constructor(){super(),e.add(this);const t=this.attachShadow({mode:"open"}),n=new CSSStyleSheet;n.replace(c),t.adoptedStyleSheets=[n],t.append(i.content.cloneNode(!0)),this.addEventListener("keydown",l(this,e,"m",o).bind(this)),this.addEventListener("click",l(this,e,"m",s).bind(this)),this.addEventListener("focusout",l(this,e,"m",r).bind(this))}connectedCallback(){const e=this.getAttribute("tabindex");this.tabIndex=null!==e?parseInt(e):-1}toggle(e){const{expanded:t}=this;e??!t?this.expand():this.collapse()}expand(){const{expanded:n}=this;n||(this.expanded=!0,l(this,e,"m",t).call(this))}collapse(){const{expanded:e}=this;e&&(this.expanded=!1)}};e=new WeakSet,t=function(){const{menu:e}=this;if(null!==e){const{style:t}=e;let{top:n,bottom:s,left:r,right:o}=this.getBoundingClientRect();const{width:i,height:c}=e.getBoundingClientRect(),{clientWidth:a,clientHeight:h}=document.body,l=e.offsetParent??document.body,{offsetLeft:d,offsetTop:p}=l,f=o+i-a,u=n+c-h;r-=d,o-=d,n-=p,s-=p,t.setProperty("left",`${f>0?o-i:r}px`),t.setProperty("top",`${u>0?n-c:s}px`)}},s=function(e){const{target:t}=e,{menu:n}=this;if(n&&!n.contains(t)){this.toggle();const{expanded:e}=this;e&&n?.focus({preventScroll:!0})}},r=function(e){const{relatedTarget:t}=e;!this.contains(t)&&this.collapse()},o=function(e){const{key:t}=e,{expanded:n}=this;switch(t){case"ArrowDown":case"Enter":n||(this.expand(),this.firstItem?.focus({preventScroll:!0}),e.stopPropagation());break;case"Escape":n&&this.collapse(),this.focus({preventScroll:!0}),e.stopPropagation()}},(i=(0,a.bG)("template")).content.append((0,a.bG)("slot"),(0,a.bG)("slot",{attributes:{name:"menu"}})),c='\n            :host {\n                display: inline-block;\n                padding: 2px;\n                line-height: 18px;\n                user-select: none;\n                white-space: nowrap;\n                cursor: pointer;\n            }\n            \n            :host(:focus) {\n                outline: 1px solid var(--focused-item-outline-color);\n                outline-offset: -1px;\n            }\n            \n            :host(:focus-within:not(:focus)) {\n                background-color: var(--focused-item-color);\n            }\n            \n            :host(:hover:not(:focus-within)) {\n                background-color: var(--hovered-item-color);\n            }\n            \n            :host([disabled]) {\n                color: lightgray;\n            }\n            \n            ::slotted([slot="menu"]) {\n                z-index: 1;\n                position: absolute;\n                color: initial;\n            }\n            \n            :host(:not([expanded])) ::slotted([slot="menu"]) {\n                opacity: 0;\n                pointer-events: none;\n            }\n            \n            :host::after {\n                display: inline-block;\n                text-align: center;\n                width: 18px;\n                height: 18px;\n                content: "▾";\n            }\n        ',h([(0,a.en)({selector:":scope > e-menu[slot=menu]"})],d.prototype,"menu",void 0),h([(0,a.en)({selector:":scope > e-menu[slot=menu] e-menuitem"})],d.prototype,"firstItem",void 0),h([(0,a.GF)({type:String})],d.prototype,"name",void 0),h([(0,a.GF)({type:Boolean})],d.prototype,"disabled",void 0),h([(0,a.GF)({type:Boolean})],d.prototype,"expanded",void 0),d=h([(0,a.b_)({name:"e-menubutton"})],d);var p=d;Object.assign((function(e){const{menu:t}=e;return t.slot="menu",(0,a.bG)("e-menubutton",{attributes:{tabindex:-1},children:[t]})}),{prototype:p.prototype})})()})();
//# sourceMappingURL=MenuButton.ts.js.map