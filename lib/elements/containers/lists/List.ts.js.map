{"version":3,"file":"elements/containers/lists/List.ts.js","mappings":"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","sources":["webpack://editor/./src/elements/Element.ts","webpack://editor/./src/elements/Snippets.ts","webpack://editor/./src/elements/containers/lists/ListItem.ts","webpack://editor/./src/elements/containers/lists/ListItemGroup.ts","webpack://editor/./src/elements/containers/menus/Menu.ts","webpack://editor/./src/elements/containers/menus/MenuItem.ts","webpack://editor/./src/elements/containers/menus/MenuItemGroup.ts","webpack://editor/./src/elements/containers/toolbars/ToolBar.ts","webpack://editor/./src/elements/containers/toolbars/ToolBarItem.ts","webpack://editor/./src/elements/containers/toolbars/ToolBarItemGroup.ts","webpack://editor/./src/models/Model.ts","webpack://editor/webpack/bootstrap","webpack://editor/webpack/runtime/define property getters","webpack://editor/webpack/runtime/hasOwnProperty shorthand","webpack://editor/./src/elements/containers/lists/List.ts"],"sourcesContent":["import { ModelList, ModelNode, ModelChangeRecord, ModelChangeObserver, ModelChangeObserverOptions } from \"../models/Model\";\r\nimport { camelToTrain } from \"./Snippets\";\r\n\r\nexport { CustomElement };\r\nexport { ReactiveChildElements };\r\nexport { QueryProperty };\r\nexport { QueryAllProperty };\r\nexport { AttributeProperty };\r\nexport { reactiveElement };\r\nexport { revokeReactiveElement };\r\nexport { reactiveChildElements };\r\nexport { revokeReactiveChildElements };\r\nexport { element };\r\nexport { fragment };\r\nexport { textNode };\r\nexport { AttributeMutationMixin };\r\nexport { AttributeType };\r\nexport { areAttributesMatching };\r\nexport { AttributeMutationMixinBase };\r\nexport { trimMultilineIndent };\r\nexport { Stylesheet };\r\n\r\nexport { reactiveElementsMap };\r\n\r\ninterface AttributePropertyDecorator {\r\n    (\r\n        init: {\r\n            type: typeof String;\r\n            observed?: boolean;\r\n            defaultValue?: string | null;\r\n            name?: string;\r\n        }\r\n    ): <E extends HTMLElement>(target: E, property: keyof E) => void;\r\n    (\r\n        init: {\r\n            type: typeof Number;\r\n            observed?: boolean;\r\n            defaultValue?: number | null;\r\n            name?: string;\r\n        }\r\n    ): <E extends HTMLElement>(target: E, property: keyof E) => void;\r\n    (\r\n        init: {\r\n            type: typeof Boolean;\r\n            observed?: boolean;\r\n            name?: string;\r\n        }\r\n    ): <E extends HTMLElement>(target: E, property: keyof E) => void;\r\n    (\r\n        init: {\r\n            type: typeof Object;\r\n            observed?: boolean;\r\n            defaultValue?: any | null;\r\n            name?: string;\r\n        }\r\n    ): <E extends HTMLElement>(target: E, property: keyof E) => void;\r\n}\r\n\r\nconst AttributeProperty: AttributePropertyDecorator = function(\r\n    init: {\r\n        type: typeof String | typeof Number | typeof Boolean | typeof Object;\r\n        observed?: boolean;\r\n        defaultValue?: string | number | any | null;\r\n        name?: string;\r\n    }\r\n) {\r\n    return <E extends HTMLElement>(\r\n        target: E, property: keyof E\r\n    ) => {\r\n        const {constructor} = target;\r\n        const {prototype} = constructor;\r\n        const propertyName = String(property);\r\n        const {defaultValue = null, observed = false, name = camelToTrain(propertyName)} = init;\r\n        if (observed) {\r\n            const observedAttributes = Reflect.get(constructor, \"observedAttributes\", constructor);\r\n            if (Array.isArray(observedAttributes)) {\r\n                observedAttributes.push(name);\r\n            }\r\n            else {\r\n                Object.defineProperty(\r\n                    constructor, \"observedAttributes\", {\r\n                        value: [name],\r\n                        writable: false\r\n                    }\r\n                );\r\n            }\r\n        }\r\n        const {type} = init;\r\n        switch (type) {\r\n            case Boolean: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function(this: HTMLElement) {\r\n                        return this.hasAttribute(name);\r\n                    },\r\n                    set: function(this: HTMLElement, value) {\r\n                        if (value) {\r\n                            this.setAttribute(name, \"\");\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case Object: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function(this: HTMLElement) {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? JSON.parse(val) : defaultValue;\r\n                    },\r\n                    set: function(this: HTMLElement, value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, JSON.stringify(value));\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case Number: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function(this: HTMLElement) {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? parseFloat(val) : defaultValue;\r\n                    },\r\n                    set: function(this: HTMLElement, value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, value);\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case String:\r\n            default: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function(this: HTMLElement) {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? val : defaultValue;\r\n                    },\r\n                    set: function(this: HTMLElement, value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, value);\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n    \r\nfunction Stylesheet(text: string): CSSStyleSheet {\r\n    const stylesheet = new CSSStyleSheet();\r\n    (stylesheet as any).replaceSync(text);\r\n    return stylesheet;\r\n}\r\n\r\nfunction trimMultilineIndent(text: string): string {\r\n    const newlineIndex = text.indexOf(\"\\n\");\r\n    text = text.substring(newlineIndex + 1);\r\n    const indentMatch = text.match(/^[\\s]*/);\r\n    if (indentMatch) {\r\n        const indent = text.substring(0, indentMatch[0].length);\r\n        text = text.replaceAll(indent, \"\").trimEnd();\r\n    }\r\n    return text;\r\n}\r\n\r\ninterface CustomElementDecorator {\r\n    (init: {\r\n        name: string;\r\n        options?: ElementDefinitionOptions\r\n    }): <C extends CustomElementConstructor>(elementCtor: C) => C;\r\n}\r\n\r\nconst CustomElement: CustomElementDecorator = function(init: {\r\n    name: string;\r\n    options?: ElementDefinitionOptions\r\n}) {\r\n    return <C extends CustomElementConstructor>(\r\n        elementCtor: C\r\n    ) => {\r\n        const {name, options} = init;\r\n        if (!customElements.get(name)) {\r\n            customElements.define(\r\n                name,\r\n                elementCtor,\r\n                options\r\n            );\r\n        }\r\n        return elementCtor;\r\n    }\r\n}\r\n\r\ninterface QueryPropertyDecorator {\r\n    (\r\n        init: {\r\n            selector: string;\r\n            withinShadowRoot?: boolean;\r\n        }\r\n    ): <E extends HTMLElement>(target: E, propertyKey: keyof E) => void;\r\n}\r\n\r\nconst QueryProperty: QueryPropertyDecorator = function(\r\n        init: {\r\n            selector: string;\r\n            withinShadowRoot?: boolean;\r\n        }\r\n    ) {\r\n    return <E extends HTMLElement>(\r\n        target: E, propertyKey: keyof E\r\n    ) => {\r\n        const {constructor} = target;\r\n        const {prototype} = constructor;\r\n        const propertyName = String(propertyKey);\r\n        const {selector} = init;\r\n        const withinShadowRoot = init.withinShadowRoot ?? false;\r\n        const getter = withinShadowRoot ? function(this: HTMLElement) {\r\n            return this.shadowRoot!.querySelector(selector);\r\n        } : function(this: HTMLElement) {\r\n            return this.querySelector(selector);\r\n        }\r\n        Object.defineProperty(prototype, propertyName, {\r\n            get: getter\r\n        });\r\n    }\r\n}\r\n\r\ninterface QueryAllPropertyDecorator {\r\n    (\r\n        init: {\r\n            selector: string;\r\n            withinShadowRoot?: boolean;\r\n        }\r\n    ): <E extends HTMLElement>(target: E, propertyKey: keyof E) => void;\r\n}\r\n\r\nconst QueryAllProperty: QueryAllPropertyDecorator = function(\r\n        init: {\r\n            selector: string;\r\n            withinShadowRoot?: boolean;\r\n        }\r\n    ) {\r\n    return <E extends HTMLElement>(\r\n        target: E, propertyKey: keyof E\r\n    ) => {\r\n        const {constructor} = target;\r\n        const {prototype} = constructor;\r\n        const propertyName = String(propertyKey);\r\n        const {selector} = init;\r\n        const withinShadowRoot = init.withinShadowRoot ?? false;\r\n        const getter = withinShadowRoot ? function(this: HTMLElement) {\r\n            return Array.from(this.shadowRoot!.querySelectorAll(selector));\r\n        } : function(this: HTMLElement) {\r\n            return Array.from(this.querySelectorAll(selector));\r\n        };\r\n        Object.defineProperty(prototype, propertyName, {\r\n            get: getter\r\n        });\r\n    }\r\n}\r\n\r\nfunction fragment(...nodes: (Node | string)[]): DocumentFragment {\r\n    const fragment = document.createDocumentFragment();\r\n    fragment.append(...nodes);\r\n    return fragment;\r\n}\r\n\r\nfunction textNode(text: string): Node {\r\n    return document.createTextNode(text);\r\n}\r\n\r\ninterface HTMLElementInit {\r\n    options?: ElementCreationOptions,\r\n    attributes?: {\r\n        [name: string]: number | string | boolean | undefined\r\n    },\r\n    dataset?: {\r\n        [property: string]: string | number | boolean\r\n    },\r\n    children?: Node | string | (Node | string)[] | NodeList | ReactiveChildElements,\r\n    listeners?: {\r\n        [EventName in keyof HTMLElementEventMap]?: EventListenerOrEventListenerObject | [EventListenerOrEventListenerObject, boolean | AddEventListenerOptions | undefined]\r\n    }\r\n}\r\n\r\nfunction element<E extends HTMLElementTagNameMap[K], K extends keyof HTMLElementTagNameMap>(\r\n    tagName: K, init?: HTMLElementInit): E;\r\nfunction element(\r\n    tagName: string, init?: HTMLElementInit): HTMLElement;\r\nfunction element<K extends keyof HTMLElementTagNameMap>(\r\n    tagName: K, init?: HTMLElementInit): HTMLElementTagNameMap[K] {\r\n    if (init) {\r\n        const {options, attributes, dataset, children, listeners} = init;\r\n        const element = document.createElement(tagName, options);\r\n        if (attributes) {\r\n            Object.entries(attributes).forEach(([attributeName, attributeValue]) => {\r\n                if (attributeValue !== undefined) {\r\n                    if (typeof attributeValue === \"boolean\") {\r\n                        element.toggleAttribute(camelToTrain(attributeName), attributeValue);\r\n                    }\r\n                    else {\r\n                        element.setAttribute(camelToTrain(attributeName), String(attributeValue));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (dataset) {\r\n            const {dataset: elementDataset} = element;\r\n            Object.keys(dataset).forEach((datasetEntry_i) => {\r\n                elementDataset[datasetEntry_i] = String(dataset[datasetEntry_i]);\r\n            });\r\n        }\r\n        if (children) {\r\n            if (typeof children === \"function\") {\r\n                children(element);\r\n            }\r\n            else if (typeof children === \"object\" && \"length\" in children) {\r\n                element.append(...Array.from(children));\r\n            }\r\n            else {\r\n                element.append(children);\r\n            }\r\n        }\r\n        if (listeners) {\r\n            Object.entries(listeners).forEach(([name_i, listener_i]) => {\r\n                if (Array.isArray(listener_i)) {\r\n                    element.addEventListener(name_i, listener_i[0], listener_i[1]);\r\n                }\r\n                else {\r\n                    element.addEventListener(name_i, listener_i);\r\n                }\r\n            });\r\n        }\r\n        return element;\r\n    }\r\n    return document.createElement(tagName);\r\n}\r\n\r\nconst reactiveElementsMap = new WeakMap<ModelNode, {\r\n    observerOptions: ModelChangeObserverOptions,\r\n    reactiveElementsArray: {\r\n        elementRef: WeakRef<Element>,\r\n        properties: string[],\r\n        react: (element: any, property: string, oldValue: any, newValue: any) => void;\r\n    }[]\r\n}>();\r\n\r\nconst reactiveElementsFinalizationRegistry = new FinalizationRegistry((heldValue: {\r\n    model: ModelNode,\r\n    reactiveElement: {\r\n        elementRef: WeakRef<Element>,\r\n        properties: string[],\r\n        react: (element: any, property: string, oldValue: any, newValue: any) => void;\r\n    }\r\n}) => {\r\n    const {model, reactiveElement} = heldValue;\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    if (reactiveElementsMapEntry !== undefined) {\r\n        const {reactiveElementsArray} = reactiveElementsMapEntry;\r\n        reactiveElementsArray.splice(reactiveElementsArray.indexOf(reactiveElement), 1);\r\n    }\r\n});\r\n\r\nconst reactiveElementsPropertyObserver = new ModelChangeObserver((records: ModelChangeRecord[]) => {\r\n    records.forEach((record_i) => {\r\n        const {target, propertyName, oldValue, newValue} = record_i;\r\n        const {reactiveElementsArray} = reactiveElementsMap.get(target)!;\r\n        reactiveElementsArray.forEach(reactiveElement_i => {\r\n            const {elementRef, react, properties} = reactiveElement_i;\r\n            const element = elementRef.deref();\r\n            if (element) {\r\n                if (properties.includes(propertyName!)) {\r\n                    react(element, propertyName!, oldValue, newValue);\r\n                }\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\nfunction reactiveElement<M extends ModelNode, E extends Element, K extends string>(\r\n    model: M,\r\n    element: E,\r\n    properties: K[],\r\n    react: (object: E, property: K, oldValue: any, newValue: any) => void\r\n): E;\r\nfunction reactiveElement<M extends ModelNode, E extends Element>(\r\n    model: M,\r\n    element: E,\r\n    properties: string[],\r\n    react: (element: E, property: string, oldValue: any, newValue: any) => void\r\n): E {\r\n    const elementRef = new WeakRef(element);\r\n    const reactiveElement = {elementRef, react, properties};\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    reactiveElementsFinalizationRegistry.register(element, {model, reactiveElement});\r\n    if (!reactiveElementsMapEntry) {\r\n        const observerOptions = {\r\n            properties: true,\r\n            propertiesFilter: properties\r\n        };\r\n        const reactiveElementsArray = [reactiveElement];\r\n        reactiveElementsMap.set(model, {observerOptions, reactiveElementsArray});\r\n        reactiveElementsPropertyObserver.observe(model, observerOptions);\r\n    }\r\n    else {\r\n        const {reactiveElementsArray, observerOptions} = reactiveElementsMapEntry;\r\n        const {propertiesFilter} = observerOptions;\r\n        reactiveElementsArray.push(reactiveElement);\r\n        observerOptions.propertiesFilter = propertiesFilter ?\r\n            propertiesFilter.concat(properties.filter(\r\n                property_i => !propertiesFilter.includes(property_i)\r\n            )) : properties.filter(\r\n                (property_i, i, properties) => properties.indexOf(property_i) === i\r\n            )\r\n    }\r\n    properties.forEach((property_i) => {\r\n        if (property_i in model) {\r\n            const value = Reflect.get(model, property_i, model);\r\n            react(element, <any>property_i, <any>undefined, value);\r\n        }\r\n    });\r\n    return element;\r\n}\r\n\r\nfunction revokeReactiveElement<M extends ModelNode, E extends Element>(\r\n    model: M,\r\n    element: E\r\n): void {\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    if (reactiveElementsMapEntry) {\r\n        const {reactiveElementsArray} = reactiveElementsMapEntry;\r\n        const reactiveElementIndex = reactiveElementsArray.findIndex(\r\n            reactiveElement => reactiveElement.elementRef.deref() === element\r\n        );\r\n        if (reactiveElementIndex > -1) {\r\n            reactiveElementsArray.splice(reactiveElementIndex, 1);\r\n        }\r\n        if (reactiveElementsArray.length === 0) {\r\n            reactiveElementsMap.delete(model);\r\n        }\r\n    }\r\n}\r\n\r\ninterface ReactiveChildElements {\r\n    (parent: ParentNode): void;\r\n}\r\n\r\nconst reactiveChildElementsMap = new WeakMap<ModelList, {\r\n    reactiveChildElementsArray: {\r\n        parentRef: WeakRef<ParentNode>,\r\n        mapping: (item: any) => Element,\r\n        placeholder?: Element\r\n    }[]\r\n}>();\r\n\r\nconst reactiveChildElementsFinalizationRegistry = new FinalizationRegistry((heldValue: {\r\n    list: ModelList,\r\n    reactiveChildElement: {\r\n        parentRef: WeakRef<ParentNode>,\r\n        mapping: (item: any) => Element,\r\n        placeholder?: Element\r\n    }\r\n}) => {\r\n    const {list, reactiveChildElement} = heldValue;\r\n    const reactiveChildrenElementsMapEntry = reactiveChildElementsMap.get(list);\r\n    if (reactiveChildrenElementsMapEntry) {\r\n        const {reactiveChildElementsArray} = reactiveChildrenElementsMapEntry;\r\n        reactiveChildElementsArray.splice(reactiveChildElementsArray.indexOf(reactiveChildElement), 1);\r\n    }\r\n});\r\n\r\nconst reactiveChildElementsObserver = new ModelChangeObserver((records: ModelChangeRecord[]) => {\r\n    let range: null | Range = null;\r\n    Array.from(records.values()).forEach((record_i) => {\r\n        const {target} = record_i;\r\n        const list = <ModelList>target;\r\n        const {length: listLength} = list;\r\n        const {reactiveChildElementsArray} = reactiveChildElementsMap.get(list)!;\r\n        reactiveChildElementsArray.forEach((reactiveChildElements_i) => {\r\n            const {parentRef, mapping, placeholder} = reactiveChildElements_i;\r\n            const parent = parentRef.deref();\r\n            if (parent) {\r\n                const {firstChild, children} = parent;\r\n                const {length: childrenCount} = children;\r\n                if (placeholder && listLength > 0 && firstChild == placeholder) {\r\n                    parent.removeChild(placeholder);\r\n                }\r\n                const {changeType, LIST_INSERT, LIST_REMOVE, LIST_SORT} = record_i;\r\n                switch (changeType) {\r\n                    case LIST_INSERT: {\r\n                        const {insertedIndex, insertedItems} = record_i;\r\n                        const insertedItemsArray = Array.from(insertedItems.values()).map(mapping);\r\n                        const {length: childrenCount} = children;\r\n                        if (insertedIndex < childrenCount) {\r\n                            children[insertedIndex].before(...insertedItemsArray);\r\n                        }\r\n                        else {\r\n                            parent.append(...insertedItemsArray);\r\n                        }\r\n                        break;\r\n                    }\r\n                    case LIST_REMOVE: {\r\n                        const {removedIndex, removedItems} = record_i;\r\n                        const {length: removedCount} = removedItems;\r\n                        range = range ?? document.createRange();\r\n                        const removeEndIndex = removedIndex + (removedCount - 1);\r\n                        if (removeEndIndex < childrenCount) {\r\n                            range.setStartBefore(children[removedIndex]);\r\n                            range.setEndAfter(children[removeEndIndex]);\r\n                            range.deleteContents();\r\n                        }\r\n                        break;\r\n                    }\r\n                    case LIST_SORT: {\r\n                        const {sortedIndices} = record_i;\r\n                        const childrenArray = Array.from(children);\r\n                        parent.append(\r\n                            ...sortedIndices.filter(\r\n                                index_i => index_i < childrenCount\r\n                            ).map(\r\n                                index_i => childrenArray[index_i]\r\n                            )\r\n                        );\r\n                        break;\r\n                    }\r\n                }\r\n                if (listLength == 0 && placeholder) {\r\n                    parent.append(placeholder);\r\n                }\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\nfunction reactiveChildElements<Model extends ModelNode>(\r\n    list: ModelList<Model>,\r\n    mapping: (item: Model) => Element,\r\n    placeholder?: Element\r\n): ReactiveChildElements {\r\n    return (parent: ParentNode) => {\r\n        const parentRef = new WeakRef(parent);\r\n        const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);\r\n        const reactiveChildElement = {parentRef, mapping, placeholder};\r\n        reactiveChildElementsFinalizationRegistry.register(parent, {list, reactiveChildElement});\r\n        if (!reactiveChildElementsMapEntry) {\r\n            const reactiveChildElementsArray = [reactiveChildElement];\r\n            reactiveChildElementsMap.set(list, {reactiveChildElementsArray});\r\n            reactiveChildElementsObserver.observe(list, {\r\n                childList: true\r\n            });\r\n        }\r\n        else {\r\n            const {reactiveChildElementsArray} = reactiveChildElementsMapEntry;\r\n            reactiveChildElementsArray.push(reactiveChildElement);\r\n        }\r\n        const children = list.length == 0 && placeholder ?\r\n            [placeholder] : Array.from(list.values()).map(mapping);\r\n        parent.replaceChildren(...children);\r\n    }\r\n}\r\n\r\nfunction revokeReactiveChildElements<Model extends ModelNode>(\r\n    list: ModelList<Model>,\r\n    parent: ParentNode,\r\n): void {\r\n    const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);\r\n    if (reactiveChildElementsMapEntry) {\r\n        const {reactiveChildElementsArray} = reactiveChildElementsMapEntry;\r\n        const reactiveChildElementsIndex = reactiveChildElementsArray.findIndex(\r\n            reactiveChildElement => reactiveChildElement.parentRef.deref() === parent\r\n        );\r\n        if (reactiveChildElementsIndex > -1) {\r\n            reactiveChildElementsArray.splice(reactiveChildElementsIndex, 1);\r\n        }\r\n        if (reactiveChildElementsArray.length === 0) {\r\n            reactiveChildElementsMap.delete(list);\r\n        }\r\n    }\r\n}\r\n\r\ninterface AttributeMutationMixin {\r\n    readonly attributeName: string;\r\n    readonly attributeValue: string;\r\n    readonly attributeType: AttributeType;\r\n    attach(element: Element): void;\r\n    detach(element: Element): void;\r\n}\r\n\r\ntype AttributeType = \"string\" | \"boolean\" | \"list\";\r\n\r\nfunction areAttributesMatching(\r\n    referenceAttributeType: AttributeType,\r\n    referenceAttributeName: string, referenceAttributeValue: string,\r\n    attributeName: string, attributeValue: string | null): boolean {\r\n    if (referenceAttributeName == attributeName) {\r\n        switch (referenceAttributeType) {\r\n            case \"boolean\":\r\n                return referenceAttributeValue == \"\" && attributeValue == \"\";\r\n            case \"string\":\r\n                return referenceAttributeValue !== \"\" && (referenceAttributeValue == attributeValue);\r\n            case \"list\":\r\n                return (referenceAttributeValue !== \"\" && attributeValue !== null) && new RegExp(`${referenceAttributeValue}\\s*?`, \"g\").test(attributeValue );\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nclass AttributeMutationMixinBase implements AttributeMutationMixin {\r\n    readonly attributeName: string;\r\n    readonly attributeValue: string;\r\n    readonly attributeType: AttributeType;\r\n\r\n    constructor(attributeName: string, attributeType: AttributeType = \"boolean\", attributeValue: string = \"\") {\r\n        this.attributeName = attributeName;\r\n        this.attributeType = attributeType;\r\n        this.attributeValue = attributeValue;\r\n    }\r\n\r\n    attach(): void {\r\n        throw new TypeError(\"Not implemented method.\");\r\n    }\r\n\r\n    detach(): void {\r\n        throw new TypeError(\"Not implemented method.\");\r\n    }\r\n}","\r\nexport { snakeToCamel };\r\nexport { camelToSnake };\r\nexport { trainToCamel };\r\nexport { camelToTrain };\r\n\r\nfunction snakeToCamel(str: string) {\r\n  return str.split('_').map(str =>  str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join(\"\");\r\n}\r\n\r\nfunction camelToSnake(str: string) {\r\n  return str.replace(/(?<!^)(?=[A-Z])/g, '_').toLowerCase();\r\n}\r\n\r\nfunction trainToCamel(str: string) {\r\n  return str.split('-').map(str =>  str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join(\"\");\r\n}\r\n\r\nfunction camelToTrain(str: string) {\r\n  return str.replace(/(?<!^)(?=[A-Z])/g, '-').toLowerCase();\r\n}","import { CustomElement, element, AttributeProperty } from \"../../Element\";\r\nimport { HTMLEMenuElement } from \"../menus/Menu\";\r\nimport { HTMLEToolBarElement } from \"../toolbars/ToolBar\";\r\n\r\nexport { HTMLEListItemElement };\r\n\r\ninterface HTMLEListItemElementConstructor {\r\n    prototype: HTMLEListItemElement;\r\n    new(): HTMLEListItemElement;\r\n}\r\n\r\ninterface HTMLEListItemElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n    readonly badge: HTMLSpanElement | null;\r\n    readonly toolbar: HTMLEToolBarElement | null;\r\n    readonly menu: HTMLEMenuElement | null;\r\n    name: string;\r\n    posinset: number;\r\n    label: string;\r\n    droptarget: boolean;\r\n    selected: boolean;\r\n    active: boolean;\r\n    attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-listitem\": HTMLEListItemElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-listitem\"\r\n})\r\nclass HTMLEListItemElementBase extends HTMLElement implements HTMLEListItemElement {\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n    \r\n    get badge(): HTMLElement | null {\r\n        return this.#badge;\r\n    }\r\n\r\n    get toolbar(): HTMLEToolBarElement | null {\r\n        return this.#toolbar;\r\n    }\r\n\r\n    get menu(): HTMLEMenuElement | null {\r\n        return this.#menu;\r\n    }\r\n\r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n\r\n    @AttributeProperty({type: Number})\r\n    posinset!: number;\r\n\r\n    @AttributeProperty({type: String, observed: true})\r\n    label!: string;\r\n\r\n    @AttributeProperty({type: Boolean})\r\n    droptarget!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean})\r\n    active!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean, observed: true})\r\n    selected!: boolean;\r\n\r\n    #badge: HTMLElement | null;\r\n    #toolbar: HTMLEToolBarElement | null;\r\n    #menu: HTMLEMenuElement | null;\r\n    \r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"slot\")\r\n        );\r\n        style = /*css*/`\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([droptarget]) {\r\n                background-color: var(--droptarget-item-color);\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--hovered-item-color);\r\n            }\r\n            \r\n            :host([active]) {\r\n                outline: 1px solid var(--focused-item-outline-color);\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                background-color: var(--focus-background-color);\r\n            }\r\n            \r\n            :host([selected]) {\r\n                background-color: var(--selected-item-color);\r\n            }\r\n        `;\r\n    }\r\n    \r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n        this.#badge = null;\r\n        this.#menu = null;\r\n        this.#toolbar = null;\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this))\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        const {tabIndex} = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n\r\n    attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", {bubbles: true}));\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                const {shadowRoot} = this;\r\n                const labelPart = shadowRoot.querySelector(\"[part=label]\");\r\n                if (labelPart) {\r\n                    labelPart.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleSlotChangeEvent(event: Event): void {\r\n        const {target} = event;\r\n        const {name: slotName} = <HTMLSlotElement>target ;\r\n        switch (slotName) {\r\n            case \"toolbar\": {\r\n                const element = (<HTMLSlotElement>target).assignedElements()[0];\r\n                this.#toolbar = element instanceof HTMLEToolBarElement ? element : null;\r\n                break;\r\n            }\r\n            case \"badge\": {\r\n                const element = (<HTMLSlotElement>target).assignedElements()[0];\r\n                this.#badge = element instanceof HTMLSpanElement ? element : null;\r\n                break;\r\n            }\r\n            case \"menu\": {\r\n                const element = (<HTMLSlotElement>target).assignedElements()[0];\r\n                this.#menu = element instanceof HTMLEMenuElement ? element : null;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar HTMLEListItemElement: HTMLEListItemElementConstructor = HTMLEListItemElementBase;","import { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEListItemElement } from \"./ListItem\";\r\n\r\nexport { HTMLEListItemGroupElement };\r\n\r\ninterface HTMLEListItemGroupElementConstructor {\r\n    prototype: HTMLEListItemGroupElement;\r\n    new(): HTMLEListItemGroupElement;\r\n}\r\n\r\ninterface HTMLEListItemGroupElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-listitemgroup\": HTMLEListItemGroupElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-listitemgroup\"\r\n})\r\nclass HTMLEListItemGroupElementBase extends HTMLElement implements HTMLEListItemGroupElement {\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"slot\")\r\n        );\r\n        style = /*css*/`\r\n            :host {\r\n                display: block;\r\n            }\r\n        `;\r\n    }\r\n    \r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n        shadowRoot.addEventListener(\r\n            \"slotchange\", this.#handleSlotChangeEvent.bind(this)\r\n        );\r\n    }\r\n\r\n    #handleSlotChangeEvent(event: Event): void {\r\n        const {target} = event;\r\n        const assignedItems = <HTMLEListItemElement[]>(<HTMLSlotElement>target)\r\n            .assignedElements()\r\n            .filter(\r\n                element_i => element_i instanceof HTMLEListItemElement\r\n            );\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n}\r\n\r\nvar HTMLEListItemGroupElement: HTMLEListItemGroupElementConstructor = HTMLEListItemGroupElementBase;","import { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEMenuItemElement } from \"./MenuItem\";\r\nimport { HTMLEMenuItemGroupElement } from \"./MenuItemGroup\";\r\n\r\nexport { HTMLEMenuElement };\r\nexport { EMenu };\r\n\r\ninterface HTMLEMenuElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n    readonly activeItem: HTMLEMenuItemElement | null;\r\n    firstItem(): HTMLEMenuItemElement | null;\r\n    items(): HTMLEMenuItemElement[];\r\n    name: string;\r\n    contextual: boolean;\r\n    connectedCallback(): void;\r\n    positionContextual(x: number, y: number): void;\r\n}\r\n\r\ninterface HTMLEMenuElementConstructor {\r\n    prototype: HTMLEMenuElement;\r\n    new(): HTMLEMenuElement;\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-menu\": HTMLEMenuElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\nvar toggleAnimations: WeakMap<HTMLEMenuItemElement, Animation>;\r\nvar HIDE_DELAY_MS = 200;\r\nvar SHOW_DELAY_MS = 400;\r\n\r\n@CustomElement({\r\n    name: \"e-menu\"\r\n})\r\nclass HTMLEMenuElementBase extends HTMLElement implements HTMLEMenuElement {\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n\r\n    items(): HTMLEMenuItemElement[] {\r\n        return Array.from(this.querySelectorAll<HTMLEMenuItemElement>(\r\n            \":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"\r\n        ));\r\n    }\r\n\r\n    get activeIndex(): number {\r\n        return this.#activeIndex;\r\n    }\r\n\r\n    get activeItem(): HTMLEMenuItemElement | null {\r\n        const {activeIndex} = this;\r\n        return this.querySelector<HTMLEMenuItemElement>(\r\n            \":is(:scope, :scope > e-menuitemgroup) > e-menuitem:focus-within\"\r\n        ) ?? activeIndex > -1 ? this.items()[activeIndex] ?? null : null;\r\n    }\r\n\r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n\r\n    @AttributeProperty({type: Boolean})\r\n    contextual!: boolean;\r\n\r\n    #walker: TreeWalker;\r\n    #activeIndex: number;\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"slot\")\r\n        );\r\n        style = /*css*/`\r\n            :host {\r\n                display: flex;\r\n                flex-direction: column;\r\n            \r\n                padding: 3px;\r\n                background-color: white;\r\n                width: max-content;\r\n                box-sizing: border-box;\r\n            \r\n                -webkit-box-shadow: var(--menu-box-shadow);\r\n                box-shadow: var(--menu-box-shadow);\r\n            }\r\n            \r\n            :host([contextual]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n            \r\n                transition-property: opacity;\r\n                transition-duration: 0.2s;\r\n                opacity: 0;\r\n            }\r\n            \r\n            :host([contextual]:focus-within) {\r\n                opacity: 1;\r\n            }\r\n        `;\r\n        toggleAnimations = new WeakMap();\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        this.#activeIndex = -1;\r\n        this.#walker = document.createTreeWalker(\r\n            this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this)\r\n        );\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"mouseover\", this.#handleMouseOverEvent.bind(this));\r\n        this.addEventListener(\"mouseout\", this.#handleMouseOutEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        const tabindex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;\r\n    }\r\n\r\n    positionContextual(x: number, y: number): void {\r\n        const {style} = this;\r\n        const {width: menuWidth, height: menuHeight} = this.getBoundingClientRect();\r\n        const {scrollX, scrollY} = window;\r\n        const left = x + scrollX;\r\n        const top = y + scrollY;\r\n        const {clientWidth, clientHeight} = document.body;\r\n        const overflowX = left + menuWidth - clientWidth;\r\n        const overflowY = top + menuHeight - clientHeight;\r\n        style.setProperty(\"left\", `${overflowX > 0 ? left - menuWidth : left}px`);\r\n        style.setProperty(\"top\", `${overflowY > 0 ? top - menuHeight : top}px`);\r\n    }\r\n\r\n    #collapseSubmenus(): void {\r\n        this.querySelectorAll<HTMLEMenuItemElement>(\r\n            \":is(:scope, :scope > e-menuitemgroup) > e-menuitem[expanded]\"\r\n        )\r\n        .forEach((item_i) => {\r\n            item_i.collapse();\r\n        });\r\n    }\r\n    \r\n    #nearestItem(target: Element): HTMLEMenuItemElement | null {\r\n        return Array.from(this.querySelectorAll<HTMLEMenuItemElement>(\r\n            \":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"\r\n        )).find(item_i => item_i.contains(target)) ?? null;\r\n    }\r\n\r\n    #walkerNodeFilter(node: Node): number {\r\n        if (node instanceof HTMLEMenuItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEMenuItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n\r\n    firstItem(): HTMLEMenuItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return <HTMLEMenuItemElement | null>walker.firstChild();\r\n    }\r\n\r\n    #lastItem(): HTMLEMenuItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return <HTMLEMenuItemElement | null>walker.lastChild();\r\n    }\r\n    \r\n    #previousItem(item: HTMLEMenuItemElement): HTMLEMenuItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return <HTMLEMenuItemElement | null>walker.previousNode();\r\n    }\r\n\r\n    #nextItem(item: HTMLEMenuItemElement): HTMLEMenuItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return <HTMLEMenuItemElement | null>walker.nextNode();\r\n    }\r\n\r\n    #firstChildItem(item: HTMLEMenuItemElement): HTMLEMenuItemElement | null {\r\n        const {menu} = item;\r\n        return menu instanceof HTMLEMenuElementBase ?\r\n            menu.firstItem() :\r\n            null;\r\n    }\r\n\r\n    #setActiveItem(item: HTMLEMenuItemElement | null): void {\r\n        if (item !== null) {\r\n            this.#activeIndex = this.items().indexOf(item);\r\n        }\r\n    }\r\n    \r\n    #handleClickEvent(event: MouseEvent): void {\r\n        const {target} = event;\r\n        const targetItem = (<HTMLElement>target).closest(\"e-menuitem\");\r\n        if (targetItem) {\r\n            const {type, checked} = targetItem;\r\n            switch (type) {\r\n                case \"checkbox\": {\r\n                    targetItem.checked = !checked;\r\n                    break;\r\n                }\r\n                case \"radio\": {\r\n                    const {name, value} = targetItem;\r\n                    targetItem.checked = true;\r\n                    this.querySelectorAll<HTMLEMenuItemElement>(\r\n                        `:is(:scope, :scope > e-menuitemgroup) > e-menuitem[type=radio][name=${name}]`\r\n                    )\r\n                    .forEach((radio_i) => {\r\n                        radio_i.checked = radio_i.value == value;\r\n                    });\r\n                    break;\r\n                }\r\n                case \"menu\":\r\n                case \"submenu\": {\r\n                    targetItem.toggle();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleFocusInEvent(event: FocusEvent): void {\r\n        const {target} = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem) {\r\n                this.#setActiveItem(nearestItem);\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleFocusOutEvent(event: FocusEvent): void {\r\n        const {relatedTarget} = event;\r\n        const lostFocusWithin = !this.contains(<Node>relatedTarget);\r\n        if (lostFocusWithin) {\r\n            const {contextual} = this;\r\n            if (contextual) {\r\n                try {\r\n                    this.remove();\r\n                }\r\n                catch (error) {};\r\n            }\r\n            else {\r\n                const {activeItem} = this;\r\n                if (activeItem?.expanded) {\r\n                    activeItem.collapse();\r\n                }\r\n                this.#setActiveItem(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleKeyDownEvent(event: KeyboardEvent) {\r\n        const {key} = event;\r\n        const {activeItem} = this;\r\n        switch (key) {\r\n            case \"ArrowUp\": {\r\n                const previousItem = activeItem ?\r\n                    this.#previousItem(activeItem) ?? this.#lastItem() :\r\n                    this.firstItem();\r\n                previousItem?.focus({preventScroll: true});\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                const nextItem = activeItem ?\r\n                    this.#nextItem(activeItem) ?? this.firstItem() :\r\n                    this.firstItem();\r\n                nextItem?.focus({preventScroll: true});\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                firstItem?.focus({preventScroll: true});\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                lastItem?.focus({preventScroll: true});\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\":\r\n            case \" \": {\r\n                if (activeItem) {\r\n                    const {type} = activeItem;\r\n                    switch (type) {\r\n                        case \"menu\":\r\n                        case \"submenu\": {\r\n                            activeItem.expand();\r\n                            if (activeItem.expanded) {\r\n                                const firstChildItem = this.#firstChildItem(activeItem);\r\n                                firstChildItem?.focus({preventScroll: true});\r\n                            }\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            activeItem.click();\r\n                            break;\r\n                        }\r\n                    }\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                if (activeItem) {\r\n                    const isClosestTargetMenu = event.composedPath().find(\r\n                        target_i => target_i instanceof HTMLEMenuElement\r\n                    ) == this;\r\n                    if (!isClosestTargetMenu) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({preventScroll: true});\r\n                        event.stopPropagation();\r\n                    }\r\n                    else {\r\n                        const {contextual} = this;\r\n                        if (contextual) {\r\n                            this.blur();\r\n                            this.dispatchEvent(new Event(\"close\", {bubbles: true}));\r\n                            event.stopPropagation();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const isClosestTargetMenu = event.composedPath().find(\r\n                        target_i => target_i instanceof HTMLEMenuElement\r\n                    ) == this;\r\n                    if (!isClosestTargetMenu) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({preventScroll: true});\r\n                        event.stopPropagation();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const {type} = activeItem;\r\n                    switch (type) {\r\n                        case \"submenu\": {\r\n                            if (!activeItem.expanded) {\r\n                                activeItem.expand();\r\n                                const firstChildItem = this.#firstChildItem(activeItem);\r\n                                firstChildItem?.focus({preventScroll: true});\r\n                                event.stopPropagation();\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleMouseOutEvent(event: MouseEvent): void {\r\n        const {target, relatedTarget} = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem !== null) {\r\n                if (nearestItem.type == \"submenu\" &&\r\n                    !nearestItem.expanded) {\r\n                    toggleAnimations.get(nearestItem)?.cancel();\r\n                }\r\n                const isTargetClosestMenu = event.composedPath().find(\r\n                    target_i => target_i instanceof HTMLEMenuElement\r\n                ) == this;\r\n                if (isTargetClosestMenu) {\r\n                    const {activeItem} = this;\r\n                    if (activeItem?.type == \"submenu\" &&\r\n                        activeItem.expanded) {\r\n                        let toggleAnimation = toggleAnimations.get(activeItem);\r\n                        if (toggleAnimation) {\r\n                            toggleAnimation.cancel();\r\n                        }\r\n                        toggleAnimation = activeItem.animate(null, {\r\n                            duration: HIDE_DELAY_MS\r\n                        });\r\n                        toggleAnimations.set(activeItem, toggleAnimation);\r\n                        const {finished} = toggleAnimation;\r\n                        finished\r\n                            .then(() => {\r\n                                activeItem.collapse();\r\n                            })\r\n                            .catch(() => undefined)\r\n                            .finally(() => {\r\n                                toggleAnimations.delete(activeItem);\r\n                            });\r\n                    }\r\n                    const {clientX, clientY} = event;\r\n                    const {left, right, top, bottom} = this.getBoundingClientRect();\r\n                    const intersectsWithMouse = !(\r\n                        left > clientX || right < clientX || top > clientY || bottom < clientY\r\n                    );\r\n                    const containsRelatedTarget = this.contains(<Node>relatedTarget);\r\n                    if (intersectsWithMouse && containsRelatedTarget) {\r\n                        if (relatedTarget instanceof HTMLEMenuElement && relatedTarget !== this) {\r\n                            relatedTarget.focus({preventScroll: true});\r\n                        }\r\n                        else {\r\n                            this.focus({preventScroll: true});\r\n                            this.#setActiveItem(null);\r\n                        }\r\n                    }\r\n                    if (!intersectsWithMouse) {\r\n                        this.focus({preventScroll: true});\r\n                        this.#setActiveItem(null);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleMouseOverEvent(event: MouseEvent): void {\r\n        const {target} = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem !== null) {\r\n                if (nearestItem.type === \"submenu\" && nearestItem.expanded) {\r\n                    toggleAnimations.get(nearestItem)?.cancel();\r\n                }\r\n                const isTargetClosestMenu = event.composedPath().find(\r\n                    target_i => target_i instanceof HTMLEMenuElement\r\n                ) == this;\r\n                if (isTargetClosestMenu) {\r\n                    const {activeItem} = this;\r\n                    if (activeItem?.type === \"submenu\" &&\r\n                        activeItem.expanded && \r\n                        !activeItem.contains(<Node>target)) {\r\n                        let toggleAnimation = toggleAnimations.get(activeItem);\r\n                        if (toggleAnimation) {\r\n                            toggleAnimation.cancel();\r\n                        }\r\n                        toggleAnimation = activeItem.animate(null, {\r\n                            duration: SHOW_DELAY_MS\r\n                        });\r\n                        toggleAnimations.set(activeItem, toggleAnimation);\r\n                        const {finished} = toggleAnimation;\r\n                        finished\r\n                            .then(() => {\r\n                                activeItem.collapse();\r\n                            })\r\n                            .catch(() => undefined)\r\n                            .finally(() => {\r\n                                toggleAnimations.delete(activeItem);\r\n                            });\r\n                    }\r\n                    this.#setActiveItem(nearestItem);\r\n                    nearestItem.focus({preventScroll: true});\r\n                    if (nearestItem.type === \"submenu\") {\r\n                        if (!nearestItem.expanded) {\r\n                            let toggleAnimation = toggleAnimations.get(nearestItem);\r\n                            if (toggleAnimation) {\r\n                                toggleAnimation.cancel();\r\n                            }\r\n                            toggleAnimation = nearestItem.animate(null, {\r\n                                duration: HIDE_DELAY_MS\r\n                            });\r\n                            toggleAnimations.set(nearestItem, toggleAnimation);\r\n                            const {finished} = toggleAnimation;\r\n                            finished\r\n                                .then(() => {\r\n                                    const {activeItem} = this;\r\n                                    this.#collapseSubmenus();\r\n                                    if (activeItem) {\r\n                                        toggleAnimations.get(activeItem)?.cancel();\r\n                                        activeItem.expand();\r\n                                        activeItem.menu?.focus({preventScroll: true});\r\n                                    }\r\n                                })\r\n                                .catch(() => undefined)\r\n                                .finally(() => {\r\n                                    toggleAnimations.delete(nearestItem);\r\n                                });\r\n                        }\r\n                        else {\r\n                            nearestItem.menu?.focus({preventScroll: true});\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar HTMLEMenuElement: HTMLEMenuElementConstructor = HTMLEMenuElementBase;\r\n\r\ninterface EMenuConstructor {\r\n    prototype: HTMLEMenuElement;\r\n    new(init: {\r\n        name?: string;\r\n        children?: (HTMLEMenuItemElement | HTMLEMenuItemGroupElement | HTMLHRElement)[];\r\n    }): HTMLEMenuElement;\r\n}\r\n\r\nvar EMenu = <EMenuConstructor>Object.assign(\r\n    <Function>function(init: {\r\n        name?: string;\r\n        children?: (HTMLEMenuItemElement | HTMLEMenuItemGroupElement | HTMLHRElement)[];\r\n    }) {\r\n        const {name, children} = init;\r\n        return element(\"e-menu\", {\r\n            attributes: {\r\n                name: name,\r\n                tabindex: -1,\r\n            },\r\n            children: children\r\n        });\r\n    }, {\r\n        prototype: HTMLEMenuElement.prototype,\r\n    }\r\n);","import { CustomElement, AttributeProperty, QueryProperty, element } from \"../../Element\";\r\nimport { HTMLEMenuElement } from \"./Menu\";\r\n\r\nexport { HTMLEMenuItemElement };\r\nexport { EMenuItem };\r\n\r\ninterface HTMLEMenuItemElementConstructor {\r\n    prototype: HTMLEMenuItemElement;\r\n    new(): HTMLEMenuItemElement;\r\n}\r\n\r\ninterface HTMLEMenuItemElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n    readonly internals: ElementInternals;\r\n    get menu(): HTMLEMenuElement | null;\r\n    name: string;\r\n    label: string | null;\r\n    value: string;\r\n    hotkey: string;\r\n    disabled: boolean;\r\n    checked: boolean;\r\n    expanded: boolean;\r\n    type: \"button\" | \"checkbox\" | \"radio\" | \"menu\" | \"submenu\";\r\n    connectedCallback(): void;\r\n    attributeChangedCallback(attributeName: string, oldValue: string | null, newValue: string | null): void;\r\n    toggle(force?: boolean): void;\r\n    expand(): void;\r\n    collapse(): void;\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-menuitem\": HTMLEMenuItemElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-menuitem\"\r\n})\r\nclass HTMLEMenuItemElementBase extends HTMLElement implements HTMLEMenuItemElement {\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n    readonly internals: ElementInternals;\r\n    \r\n    @QueryProperty({selector: \":scope > e-menu[slot=menu]\"})\r\n    menu!: HTMLEMenuElement | null;\r\n\r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n\r\n    @AttributeProperty({type: String, observed: true})\r\n    label!: string | null;\r\n\r\n    @AttributeProperty({type: String})\r\n    value!: string;\r\n\r\n    @AttributeProperty({type: String})\r\n    hotkey!: string;\r\n\r\n    @AttributeProperty({type: Boolean, observed: true})\r\n    disabled!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean, observed: true})\r\n    checked!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean, observed: true})\r\n    expanded!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean})\r\n    overflown!: boolean;\r\n\r\n    @AttributeProperty({type: String, defaultValue: \"button\", observed: true})\r\n    type!: \"button\" | \"checkbox\" | \"radio\" | \"menu\" | \"submenu\";\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"span\", {\r\n                attributes: {\r\n                    part: \"icon\"\r\n                }\r\n            }),\r\n            element(\"span\", {\r\n                attributes: {\r\n                    part: \"label\"\r\n                },\r\n                children: [\r\n                    element(\"slot\")\r\n                ]\r\n            }),\r\n            element(\"span\", {\r\n                attributes: {\r\n                    part: \"arrow\"\r\n                }\r\n            }),\r\n            element(\"slot\", {\r\n                attributes: {\r\n                    name: \"menu\"\r\n                }\r\n            })\r\n        );\r\n        style = /*css*/`\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                box-sizing: border-box;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:focus-within) {\r\n                background-color: var(--focused-item-color);\r\n            }\r\n\r\n            :host(:focus-visible) {\r\n                outline: none;\r\n            }\r\n            \r\n            :host(:is([type=\"menu\"], [type=\"submenu\"])) ::slotted([slot=\"menu\"]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n            }\r\n            \r\n            :host(:is([type=\"menu\"], [type=\"submenu\"]):not([expanded])) ::slotted([slot=\"menu\"]) {\r\n                opacity: 0;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host([type=\"submenu\"]) [part=\"icon\"] {\r\n                visibility: hidden;\r\n            }\r\n            \r\n            :host([type=\"menu\"]) [part=\"icon\"],\r\n            :host(:not([type=\"submenu\"])) [part=\"arrow\"] {\r\n                display: none;\r\n            }\r\n            \r\n            :host(:is([type=\"checkbox\"], [type=\"radio\"])[checked]) {\r\n                --icon-color: black;\r\n                --icon-image: url(\"/assets/done_FILL0_wght400_GRAD0_opsz48.svg\");\r\n            }\r\n            \r\n            :host([type=\"submenu\"]) {\r\n                --arrow-color: black;\r\n                --arrow-image: url(\"/assets/arrow_right_FILL0_wght400_GRAD0_opsz48.svg\");\r\n            }\r\n            \r\n            [part=\"icon\"],\r\n            [part=\"label\"],\r\n            [part=\"arrow\"] {\r\n                pointer-events: none;\r\n            }\r\n            \r\n            [part=\"icon\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                padding: 2px;\r\n                overflow: hidden;\r\n                margin-right: 4px;\r\n            }\r\n            \r\n            [part=\"label\"] {\r\n                flex: auto;\r\n                line-height: 18px;\r\n                padding: 2px;\r\n                margin-left: 8px;\r\n                margin-right: 8px;\r\n            }\r\n            \r\n            :host(:is(:not([type]), [type=\"button\"], [type=\"radio\"], [type=\"checkbox\"])[checked]) [part=\"icon\"] {\r\n                background-color: var(--activated-item-color);\r\n            }\r\n            \r\n            :host(:is(:not([type]), [type=\"button\"], [type=\"radio\"], [type=\"checkbox\"])) [part=\"icon\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: var(--icon-color, none);\r\n                -webkit-mask-image: var(--icon-image, none);\r\n                mask-image: var(--icon-image, none);\r\n                filter: var(--icon-filter, none);\r\n            }\r\n            \r\n            [part=\"arrow\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px 4px 1px 1px;\r\n            }\r\n            \r\n            [part=\"arrow\"]::after {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: var(--arrow-color, none);\r\n                -webkit-mask-image: var(--arrow-image, none);\r\n                mask-image: var(--arrow-image, none);\r\n                filter: var(--arrow-filter, none);\r\n            }\r\n\r\n            :host(:hover):host-context(e-menubar:focus),\r\n            :host(:hover):host-context(e-menubar:not(:focus-within)) {\r\n                background-color: var(--hovered-item-color);\r\n            }\r\n        `;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        const internals = this.attachInternals();\r\n        this.internals = internals;\r\n        internals.role = \"menuitem\";\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n    }\r\n    \r\n    connectedCallback(): void {\r\n        const {tabIndex} = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n\r\n    attributeChangedCallback(attributeName: string, oldValue: string | null, newValue: string | null): void {\r\n        const {internals} = this;\r\n        switch (attributeName) {\r\n            case \"type\": {\r\n                switch (newValue) {\r\n                    case \"checkbox\":\r\n                    case \"radio\": {\r\n                        internals.role = `menuitem${newValue}`;\r\n                        break;\r\n                    }\r\n                    default: {\r\n                        internals.role = \"menuitem\";\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"checked\": {\r\n                internals.ariaChecked = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"disabled\": {\r\n                internals.ariaDisabled = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"expanded\": {\r\n                internals.ariaExpanded = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                internals.ariaLabel = newValue;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    toggle(force?: boolean): void {\r\n        const {type, expanded} = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                const expand = force ?? !expanded;\r\n                this.expanded = expand;\r\n                if (expand) {\r\n                    this.#positionMenu();\r\n                }\r\n                this.dispatchEvent(new Event(\"toggle\", {bubbles: true}));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    expand(): void {\r\n        const {type, expanded} = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                if (!expanded) {\r\n                    this.expanded = true;\r\n                    this.#positionMenu();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    collapse(): void {\r\n        const {type, expanded} = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                if (expanded) {\r\n                    this.expanded = false;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    #positionMenu(): void {\r\n        const {menu} = this;\r\n        if (menu !== null) {\r\n            const {style: menuStyle} = menu;\r\n            let {top: itemTop, bottom: itemBottom, left: itemLeft, right: itemRight} = this.getBoundingClientRect();\r\n            const {width: menuWidth, height: menuHeight} = menu.getBoundingClientRect();\r\n            const {clientWidth, clientHeight} = document.body;\r\n            const {type} = this;\r\n            if (type === \"menu\") {\r\n                const offsetParent = <HTMLElement>(menu.offsetParent ?? document.body);\r\n                const {offsetLeft, offsetTop} = offsetParent;\r\n                const overflowX = itemRight + menuWidth - clientWidth;\r\n                const overflowY = itemTop + menuHeight - clientHeight;\r\n                itemLeft -= offsetLeft;\r\n                itemRight -= offsetLeft;\r\n                itemTop -= offsetTop;\r\n                itemBottom -= offsetTop;\r\n                menuStyle.setProperty(\"left\", `${\r\n                    overflowX > 0 ?\r\n                    itemRight - menuWidth :\r\n                    itemLeft\r\n                }px`);\r\n                menuStyle.setProperty(\"top\", `${\r\n                    overflowY > 0 ?\r\n                    itemTop - menuHeight  :\r\n                    itemBottom\r\n                }px`);\r\n            }\r\n            else {\r\n                const overflowX = itemRight + menuWidth - clientWidth;\r\n                const overflowY = itemTop + menuHeight - clientHeight;\r\n                const closestMenu = this.closest(\"e-menu\");\r\n                if (closestMenu !== null) {\r\n                    const {top: closestMenuTop, left: closestMenuLeft} = closestMenu.getBoundingClientRect();\r\n                    itemLeft -= closestMenuLeft;\r\n                    itemRight -= closestMenuLeft;\r\n                    itemTop -= closestMenuTop;\r\n                    itemBottom -= closestMenuTop;\r\n                }\r\n                menuStyle.setProperty(\"left\", `${\r\n                    overflowX > 0 ?\r\n                    itemLeft - menuWidth :\r\n                    itemRight\r\n                }px`);\r\n                menuStyle.setProperty(\"top\", `${\r\n                    overflowY > 0 ?\r\n                    itemBottom - menuHeight :\r\n                    itemTop\r\n                }px`);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar HTMLEMenuItemElement: HTMLEMenuItemElementConstructor = HTMLEMenuItemElementBase;\r\n\r\ninterface EMenuItemConstructor {\r\n    prototype: HTMLEMenuItemElement;\r\n    new(init: {\r\n        name?: string;\r\n        label: string;\r\n        type?: \"button\" | \"checkbox\" | \"radio\" | \"menu\" | \"submenu\";\r\n        value?: string;\r\n        trigger?: () => void;\r\n        menu?: HTMLEMenuElement;\r\n    }): HTMLEMenuItemElement;\r\n    button(init: {\r\n        name?: string;\r\n        label: string;\r\n        value?: string;\r\n        trigger?: () => void;\r\n    }): HTMLEMenuItemElement;\r\n    checkbox(init: {\r\n        name?: string;\r\n        label: string;\r\n        value?: string;\r\n        trigger?: () => void;\r\n    }): HTMLEMenuItemElement;\r\n    radio(init: {\r\n        name?: string;\r\n        label: string;\r\n        value?: string;\r\n        trigger?: () => void;\r\n    }): HTMLEMenuItemElement;\r\n    menu(init: {\r\n        name?: string;\r\n        label: string;\r\n        menu: HTMLEMenuElement;\r\n    }): HTMLEMenuItemElement;\r\n    submenu(init: {\r\n        name?: string;\r\n        label: string;\r\n        menu: HTMLEMenuElement;\r\n    }): HTMLEMenuItemElement;\r\n}\r\n\r\nvar EMenuItem = <EMenuItemConstructor>Object.assign(\r\n    <Function>function(init: {\r\n        name?: string;\r\n        label: string;\r\n        type?: \"button\" | \"checkbox\" | \"radio\" | \"menu\" | \"submenu\";\r\n        value?: string;\r\n        trigger?: () => void;\r\n        menu?: HTMLEMenuElement;\r\n    }) {\r\n        const {label, name, type, value, trigger, menu} = init;\r\n        if (menu) {\r\n            menu.slot = \"menu\";\r\n        }\r\n        return element(\"e-menuitem\", {\r\n            attributes: {\r\n                tabindex: -1,\r\n                title: label,\r\n                name: name,\r\n                value: value,\r\n                type: type\r\n            },\r\n            children: menu ? [\r\n                label,\r\n                menu\r\n            ] : [\r\n                label\r\n            ],\r\n            listeners: {\r\n                click: trigger\r\n            }\r\n        });\r\n    }, {\r\n        prototype: HTMLEMenuItemElement.prototype,\r\n        button(init: {\r\n            name?: string,\r\n            label: string,\r\n            value?: string,\r\n            trigger?: () => void;\r\n        }) {\r\n            return new EMenuItem({\r\n                ...init, type: \"button\"\r\n            });\r\n        },\r\n        checkbox(init: {\r\n            name?: string;\r\n            label: string;\r\n            value?: string;\r\n            trigger?: () => void;\r\n        }) {\r\n            return new EMenuItem({\r\n                ...init, type: \"checkbox\"\r\n            });\r\n        },\r\n        radio(init: {\r\n            name?: string;\r\n            label: string;\r\n            value?: string;\r\n            trigger?: () => void;\r\n        }) {\r\n            return new EMenuItem({\r\n                ...init, type: \"radio\"\r\n            });\r\n        },\r\n        menu(init: {\r\n            name?: string;\r\n            label: string;\r\n            menu: HTMLEMenuElement;\r\n        }) {\r\n            return new EMenuItem({\r\n                ...init, type: \"menu\"\r\n            });\r\n        },\r\n        submenu(init: {\r\n            name?: string;\r\n            label: string;\r\n            menu: HTMLEMenuElement;\r\n        }) {\r\n            return new EMenuItem({\r\n                ...init, type: \"submenu\"\r\n            });\r\n        }\r\n    }\r\n);","import { element, CustomElement, AttributeProperty } from \"../../Element\";\r\nimport { HTMLEMenuItemElement, EMenuItem } from \"./MenuItem\";\r\n\r\nexport { HTMLEMenuItemGroupElement };\r\nexport { EMenuItemGroup };\r\n\r\ninterface HTMLEMenuItemGroupElementConstructor {\r\n    prototype: HTMLEMenuItemGroupElement;\r\n    new(): HTMLEMenuItemGroupElement;\r\n}\r\n\r\ninterface HTMLEMenuItemGroupElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n    name: string;\r\n    label: string;\r\n    attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void;\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-menuitemgroup\": HTMLEMenuItemGroupElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-menuitemgroup\"\r\n})\r\nclass HTMLEMenuItemGroupElementBase extends HTMLElement implements HTMLEMenuItemGroupElement {\r\n\r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n\r\n    @AttributeProperty({type: String, observed: true})\r\n    label!: string;\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n    readonly internals: ElementInternals;\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"span\", {\r\n                attributes: {\r\n                    part: \"label\"\r\n                }\r\n            }),\r\n            element(\"slot\")\r\n        );\r\n        style = /*css*/`\r\n            :host {\r\n                display: flex;\r\n                flex-direction: column;\r\n            }\r\n            \r\n            [part=\"label\"] {\r\n                font-weight: bold;\r\n            }\r\n            \r\n            :host([label]) [part=\"label\"] {\r\n                padding-bottom: 6px;\r\n            }\r\n        `;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n        const internals = this.attachInternals();\r\n        internals.role = \"group\";\r\n        this.internals = internals;\r\n    }\r\n\r\n    attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\r\n        const {internals} = this;\r\n        switch (name) {\r\n            case \"label\":\r\n                internals.ariaLabel = newValue;\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nvar HTMLEMenuItemGroupElement: HTMLEMenuItemGroupElementConstructor = HTMLEMenuItemGroupElementBase;\r\n\r\ninterface EMenuItemGroupConstructor {\r\n    prototype: HTMLEMenuItemGroupElement;\r\n    new(init: {\r\n        name?: string;\r\n        items: HTMLEMenuItemElement[];\r\n    }): HTMLEMenuItemGroupElement;\r\n    radios(init: {name: string, items: {label: string, value: string}[]}): HTMLEMenuItemGroupElement;\r\n}\r\n\r\nvar EMenuItemGroup = <EMenuItemGroupConstructor>Object.assign(\r\n    <Function>function(init: {\r\n        name?: string,\r\n        items: HTMLEMenuItemElement[]\r\n    }) {\r\n        const {name, items} = init;\r\n        return element(\"e-menuitemgroup\", {\r\n            attributes: {\r\n                name: name\r\n            },\r\n            children: items\r\n        });\r\n    }, {\r\n        prototype: HTMLEMenuItemGroupElement.prototype,\r\n        radios: (init: {\r\n            name: string,\r\n            items: {\r\n                label: string,\r\n                value: string\r\n            }[]\r\n        }) => {\r\n            const {name, items} = init;\r\n            return element(\"e-menuitemgroup\", {\r\n                attributes: {\r\n                    name: name\r\n                },\r\n                children: items.map(\r\n                    ({label, value}) => new EMenuItem({name, label, type: \"radio\", value})\r\n                )\r\n            });\r\n        }\r\n    }\r\n);","import { HTMLESelectElement } from \"../../controls/forms/Select\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEToolBarItemElement } from \"./ToolBarItem\";\r\nimport { HTMLEToolBarItemGroupElement } from \"./ToolBarItemGroup\";\r\n\r\nexport { HTMLEToolBarElement };\r\n\r\ntype ToolBarOrientation = \"horizontal\" | \"vertical\";\r\n\r\ninterface HTMLEToolBarElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n    readonly activeItem: HTMLEToolBarItemElement | null;\r\n    items(): HTMLEToolBarItemElement[];\r\n    firstItem(): HTMLEToolBarItemElement | null;\r\n    name: string;\r\n    orientation: ToolBarOrientation;\r\n}\r\n\r\ninterface HTMLEToolbarElementConstructor {\r\n    prototype: HTMLEToolBarElement;\r\n    new(): HTMLEToolBarElement;\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-toolbar\": HTMLEToolBarElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\nvar wasExpandedOnMouseDown: WeakMap<HTMLEToolBarItemElement, boolean>;\r\n\r\n@CustomElement({\r\n    name: \"e-toolbar\"\r\n})\r\nclass HTMLEToolBarElementBase extends HTMLElement implements HTMLEToolBarElement {\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n\r\n    get activeItem(): HTMLEToolBarItemElement | null {\r\n        return this.querySelector<HTMLEToolBarItemElement>(\r\n            \"e-toolbaritem[active]\"\r\n        );\r\n    }\r\n\r\n    items(): HTMLEToolBarItemElement[] {\r\n        return Array.from(this.querySelectorAll<HTMLEToolBarItemElement>(\r\n            \":is(:scope, :scope > e-toolbaritemgroup) > e-toolbaritem\"\r\n        ));\r\n    }\r\n\r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n\r\n    @AttributeProperty({type: String})\r\n    orientation!: ToolBarOrientation;\r\n\r\n    #walker: TreeWalker;\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"slot\")\r\n        );\r\n        wasExpandedOnMouseDown = new WeakMap();\r\n        style = /*css*/`\r\n            :host {\r\n                display: flex;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(\r\n            this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this)\r\n        );\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        const {tabIndex} = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n\r\n    #nodeFilter(node: Node): number {\r\n        if (node instanceof HTMLEToolBarItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEToolBarItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n\r\n    firstItem(): HTMLEToolBarItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return <HTMLEToolBarItemElement | null>walker.firstChild();\r\n    }\r\n\r\n    #lastItem(): HTMLEToolBarItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return <HTMLEToolBarItemElement | null>walker.lastChild();\r\n    }\r\n    \r\n    #previousItem(item: HTMLEToolBarItemElement): HTMLEToolBarItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = <HTMLEToolBarItemElement | null>walker.previousSibling();\r\n        return previousItem;\r\n    }\r\n\r\n    #nextItem(item: HTMLEToolBarItemElement): HTMLEToolBarItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return <HTMLEToolBarItemElement | null>walker.nextSibling();\r\n    }\r\n\r\n    #setActiveItem(item: HTMLEToolBarItemElement | null): void {\r\n        const {activeItem} = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n        }\r\n    }\r\n\r\n    #handleClickEvent(event: MouseEvent): void {\r\n        const {target} = event;\r\n        const targetItem = (<HTMLElement>target).closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            const {type, pressed} = targetItem;\r\n            switch (type) {\r\n                case \"checkbox\": {\r\n                    targetItem.pressed = !pressed;\r\n                    break;\r\n                }\r\n                case \"radio\": {\r\n                    targetItem.pressed = true;\r\n                    break;\r\n                }\r\n                case \"menubutton\": {\r\n                    const {menubutton} = targetItem;\r\n                    if (menubutton && !menubutton.contains(<Node>target)) {\r\n                        const force = !wasExpandedOnMouseDown.get(targetItem) ?? true;\r\n                        menubutton.toggle(force);\r\n                        if (force) {\r\n                            menubutton.firstItem?.focus({preventScroll: true});\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case \"select\": {\r\n                    const {select} = targetItem;\r\n                    if (select && !select.contains(<Node>target)) {\r\n                        const force = !wasExpandedOnMouseDown.get(targetItem) ?? true;\r\n                        select.toggle(force);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n\r\n    #handleContextMenuEvent(event: MouseEvent): void {\r\n        event.stopPropagation();\r\n    }\r\n\r\n    #handleDblClickEvent(event: MouseEvent): void {\r\n        event.stopPropagation();\r\n    }\r\n\r\n    #handleFocusEvent(event: FocusEvent): void {\r\n        const {relatedTarget} = event;\r\n        const {activeItem} = this;\r\n        if (!this.contains(<Node>relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n\r\n    #handleFocusInEvent(event: FocusEvent): void {\r\n        const {target} = event;\r\n        const targetItem = <HTMLEToolBarItemElement | null>(<HTMLElement>target).closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            this.#setActiveItem(targetItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n\r\n    #handleFocusOutEvent(event: FocusEvent): void {\r\n        const {relatedTarget} = event;\r\n        const lostFocusWithin = !this.contains(<Node>relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n\r\n    #handleMouseDownEvent(event: MouseEvent): void {\r\n        const {target} = event;\r\n        const targetItem = (<HTMLElement>target).closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            const {type} = targetItem;\r\n            switch (type) {\r\n                case \"menubutton\": {\r\n                    const {menubutton} = targetItem;\r\n                    if (menubutton && !menubutton.contains(<Node>target)) {\r\n                        wasExpandedOnMouseDown.set(targetItem, menubutton.expanded);\r\n                    }\r\n                    break;\r\n                }\r\n                case \"select\": {\r\n                    const {select} = targetItem;\r\n                    if (select && !select.contains(<Node>target)) {\r\n                        wasExpandedOnMouseDown.set(targetItem, select.expanded);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleKeyDownEvent(event: KeyboardEvent): void {\r\n        const {key} = event;\r\n        const {activeItem} = this;\r\n        switch (key) {\r\n            case \"Enter\": {\r\n                if (activeItem) {\r\n                    const {type} = activeItem;\r\n                    switch (type) {\r\n                        case \"menubutton\": {\r\n                            const {menubutton} = activeItem;\r\n                            if (menubutton) {\r\n                                menubutton.expand();\r\n                                menubutton.firstItem?.focus({preventScroll: true});\r\n                            }\r\n                            break;\r\n                        }\r\n                        case \"select\": {\r\n                            const {select} = activeItem;\r\n                            if (select) {\r\n                                select.expand();\r\n                            }\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            activeItem.click();\r\n                            break;\r\n                        }\r\n                    }\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({preventScroll: true});\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({preventScroll: true});\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({preventScroll: true});\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({preventScroll: true});\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const {type} = activeItem;\r\n                    switch (type) {\r\n                        case \"select\": {\r\n                            activeItem.select?.expand();\r\n                            event.stopPropagation();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({preventScroll: true});\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({preventScroll: true});\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar HTMLEToolBarElement: HTMLEToolbarElementConstructor = HTMLEToolBarElementBase;","import { HTMLESelectElement } from \"../../controls/forms/Select\";\r\nimport { CustomElement, AttributeProperty, element, QueryProperty } from \"../../Element\";\r\nimport { HTMLEMenuButtonElement } from \"../menus/MenuButton\";\r\n\r\nexport { HTMLEToolBarItemElement };\r\nexport { EToolBarItem };\r\n\r\ninterface HTMLEToolBarItemElementConstructor {\r\n    prototype: HTMLEToolBarItemElement;\r\n    new(): HTMLEToolBarItemElement;\r\n}\r\n\r\ninterface HTMLEToolBarItemElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n    readonly menubutton: HTMLEMenuButtonElement | null;\r\n    readonly select: HTMLESelectElement | null;\r\n    value: string;\r\n    name: string;\r\n    label: string;\r\n    active: boolean;\r\n    pressed: boolean;\r\n    iconed: boolean;\r\n    type: \"button\" | \"checkbox\" | \"radio\" | \"menubutton\" | \"select\";\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-toolbaritem\": HTMLEToolBarItemElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\nvar iconPart: HTMLElement;\r\n\r\n@CustomElement({\r\n    name: \"e-toolbaritem\"\r\n})\r\nclass HTMLEToolBarItemElementBase extends HTMLElement implements HTMLEToolBarItemElement {\r\n    \r\n    readonly shadowRoot!: ShadowRoot;\r\n\r\n    @QueryProperty({selector: \":scope > e-menubutton[slot=menubutton]\"})\r\n    readonly menubutton!: HTMLEMenuButtonElement | null;\r\n    \r\n    @QueryProperty({selector: \":scope > e-select[slot=select]\"})\r\n    readonly select!: HTMLESelectElement | null;\r\n\r\n    @AttributeProperty({type: Boolean})\r\n    active!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean})\r\n    pressed!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean})\r\n    expanded!: boolean;\r\n\r\n    @AttributeProperty({type: Boolean, observed: true})\r\n    iconed!: boolean;\r\n\r\n    @AttributeProperty({type: String, observed: true})\r\n    value!: string;\r\n\r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n\r\n    @AttributeProperty({type: String, observed: true})\r\n    label!: string;\r\n\r\n    @AttributeProperty({type: String})\r\n    type!: \"button\" | \"checkbox\" | \"radio\" | \"menubutton\" | \"select\";\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"slot\"),\r\n            element(\"slot\", {\r\n                attributes: {\r\n                    name: \"select\"\r\n                }\r\n            }),\r\n            element(\"slot\", {\r\n                attributes: {\r\n                    name: \"menubutton\"\r\n                }\r\n            })\r\n        );\r\n        iconPart = element(\"span\", {\r\n            attributes: {\r\n                part: \"icon\"\r\n            }\r\n        });\r\n        style = /*css*/`\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                cursor: pointer;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--hovered-item-color);\r\n            }\r\n            \r\n            :host([pressed]) {\r\n                background-color: var(--activated-item-color);\r\n            }\r\n            \r\n            :host(:not([iconed])) [part=\"icon\"] {\r\n                display: none;\r\n            }\r\n\r\n            [part=\"icon\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                padding: 2px;\r\n                overflow: hidden;\r\n            }\r\n            \r\n            [part=\"icon\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: var(--icon-color, none);\r\n                -webkit-mask-image: var(--icon-image, none);\r\n                mask-image: var(--icon-image, none);\r\n                filter: var(--icon-filter, none);\r\n            }\r\n            \r\n            :host(:focus-within):host-context(e-toolbar:focus-within) {\r\n                outline: 1px solid var(--focused-item-outline-color);\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            /*:host([type=\"menubutton\"]) ::slotted(e-menubutton):focus,\r\n            :host([type=\"select\"]) ::slotted(e-select):focus {\r\n                outline: none;\r\n                outline-offset: none;\r\n            }*/\r\n        `;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        const {tabIndex} = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n\r\n    attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\r\n        switch (name) {\r\n            case \"label\": {\r\n                //...\r\n                break;\r\n            }\r\n            case \"iconed\": {\r\n                const {shadowRoot} = this;\r\n                if (newValue !== null) {\r\n                    shadowRoot.prepend(iconPart.cloneNode(true));\r\n                }\r\n                else {\r\n                    const iconPart = shadowRoot.querySelector<HTMLElement>(\"[part=icon]\");\r\n                    if (iconPart) {\r\n                        iconPart.remove();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar HTMLEToolBarItemElement: HTMLEToolBarItemElementConstructor = HTMLEToolBarItemElementBase;\r\n\r\ninterface EToolBarItemConstructor {\r\n    prototype: HTMLEToolBarItemElement;\r\n    new(init: {\r\n        name: string;\r\n        label: string;\r\n        type: \"button\" | \"checkbox\" | \"radio\" | \"menubutton\" | \"select\";\r\n        value?: string;\r\n        trigger?: () => void;\r\n        menubutton?: HTMLEMenuButtonElement;\r\n        select?: HTMLESelectElement;\r\n    }): HTMLEToolBarItemElement;\r\n    button(init: {\r\n        name: string;\r\n        label: string;\r\n        value?: string;\r\n        trigger?: () => void;\r\n    }): HTMLEToolBarItemElement;\r\n    checkbox(init: {\r\n        name: string;\r\n        label: string;\r\n        value?: string;\r\n        trigger?: () => void;\r\n    }): HTMLEToolBarItemElement;\r\n    radio(init: {\r\n        name: string;\r\n        label: string;\r\n        value?: string;\r\n        trigger?: () => void;\r\n    }): HTMLEToolBarItemElement;\r\n    menubutton(init: {\r\n        name: string;\r\n        label: string;\r\n        menubutton: HTMLEMenuButtonElement;\r\n    }): HTMLEToolBarItemElement;\r\n    select(init: {\r\n        name: string;\r\n        label: string;\r\n        select: HTMLESelectElement;\r\n    }): HTMLEToolBarItemElement;\r\n}\r\n\r\nvar EToolBarItem = <EToolBarItemConstructor>Object.assign(\r\n    <Function>function(init: {\r\n        name: string;\r\n        label: string;\r\n        type: \"button\" | \"checkbox\" | \"radio\" | \"menubutton\" | \"select\";\r\n        value?: string;\r\n        trigger?: () => void;\r\n        menubutton?: HTMLEMenuButtonElement;\r\n        select?: HTMLESelectElement;\r\n    }) {\r\n        const {label, name, type, value, trigger, menubutton, select} = init;\r\n        if (menubutton) {\r\n            menubutton.slot = \"menubutton\";\r\n        }\r\n        if (select) {\r\n            select.slot = \"select\";\r\n        }\r\n        return element(\"e-toolbaritem\", {\r\n            attributes: {\r\n                tabindex: -1,\r\n                title: label,\r\n                name: name,\r\n                value: value,\r\n                type: type\r\n            },\r\n            children: menubutton ? [menubutton] : select ? [select] : undefined,\r\n            listeners: {\r\n                click: trigger\r\n            }\r\n        });\r\n    }, {\r\n        prototype: HTMLEToolBarItemElement.prototype,\r\n        button(init: {\r\n            name: string,\r\n            label: string,\r\n            value?: string,\r\n            trigger?: () => void;\r\n        }) {\r\n            return new EToolBarItem({\r\n                ...init, type: \"button\"\r\n            });\r\n        },\r\n        checkbox(init: {\r\n            name: string;\r\n            label: string;\r\n            value?: string;\r\n            trigger?: () => void;\r\n        }) {\r\n            return new EToolBarItem({\r\n                ...init, type: \"checkbox\"\r\n            });\r\n        },\r\n        radio(init: {\r\n            name: string;\r\n            label: string;\r\n            value?: string;\r\n            trigger?: () => void;\r\n        }) {\r\n            return new EToolBarItem({\r\n                ...init, type: \"radio\"\r\n            });\r\n        },\r\n        menubutton(init: {\r\n            name: string;\r\n            label: string;\r\n            menubutton: HTMLEMenuButtonElement;\r\n        }) {\r\n            return new EToolBarItem({\r\n                ...init, type: \"menubutton\"\r\n            });\r\n        },\r\n        select(init: {\r\n            name: string;\r\n            label: string;\r\n            select: HTMLESelectElement;\r\n        }) {\r\n            return new EToolBarItem({\r\n                ...init, type: \"select\"\r\n            });\r\n        },\r\n    }\r\n);","\r\nimport { element, CustomElement, AttributeProperty } from \"../../Element\";\r\n\r\nexport { HTMLEToolBarItemGroupElement };\r\n\r\ninterface HTMLEToolBarItemGroupElementConstructor {\r\n    prototype: HTMLEToolBarItemGroupElement;\r\n    new(): HTMLEToolBarItemGroupElement;\r\n}\r\n\r\ninterface HTMLEToolBarItemGroupElement extends HTMLElement {\r\n    name: string;\r\n    label: string;\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-toolbaritemgroup\": HTMLEToolBarItemGroupElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-toolbaritemgroup\"\r\n})\r\nclass HTMLEToolBarItemGroupElementBase extends HTMLElement implements HTMLEToolBarItemGroupElement {\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n    \r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n\r\n    @AttributeProperty({type: String, observed: true})\r\n    label!: string;\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"slot\")\r\n        );\r\n        style = /*css*/`\r\n            :host {\r\n                display: flex;\r\n                width: max-content;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n    }\r\n\r\n    attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\r\n        switch (name) {\r\n            case \"label\": {\r\n                const label = this.shadowRoot.querySelector<HTMLLabelElement>(\"[part='label']\");\r\n                if (label) {\r\n                    label.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar HTMLEToolBarItemGroupElement: HTMLEToolBarItemGroupElementConstructor = HTMLEToolBarItemGroupElementBase;","export { ModelChangeRecord };\r\nexport { ModelEvent };\r\nexport { ModelNode };\r\nexport { ModelObject };\r\nexport { ModelProperty };\r\nexport { ModelList };\r\nexport { ModelChangeObserverOptions };\r\nexport { ModelChangeObserver };\r\n\r\ninterface ModelChangeRecordConstructor {\r\n    prototype: ModelChangeRecord;\r\n    new(\r\n        init: {\r\n            target: ModelNode | ModelList;\r\n            changeType: number;\r\n            propertyName?: string;\r\n            oldValue?: any;\r\n            newValue?: any;\r\n            removedIndex?: number,\r\n            removedItems?: ModelNode[],\r\n            insertedIndex?: number,\r\n            insertedItems?: ModelNode[],\r\n            sortedIndices?: number[]\r\n        }\r\n    ): ModelChangeRecord;\r\n    readonly PROPERTY_CHANGE: number;\r\n    readonly LIST_REMOVE: number;\r\n    readonly LIST_INSERT: number;\r\n    readonly LIST_SORT: number;\r\n}\r\n\r\ninterface ModelChangeRecord {\r\n    readonly target: ModelNode | ModelList\r\n    readonly propertyName: string | null;\r\n    readonly oldValue: any;\r\n    readonly newValue: any;\r\n    readonly changeType: number;\r\n    readonly removedIndex: number;\r\n    readonly removedItems: ModelNodesList;\r\n    readonly insertedIndex: number;\r\n    readonly insertedItems: ModelNodesList;\r\n    readonly sortedIndices: number[];\r\n    readonly PROPERTY_CHANGE: number;\r\n    readonly LIST_REMOVE: number;\r\n    readonly LIST_INSERT: number;\r\n    readonly LIST_SORT: number;\r\n}\r\n\r\nclass ModelChangeRecordBase implements ModelChangeRecord {\r\n    readonly target: ModelNode | ModelList;\r\n    readonly changeType: number;\r\n    readonly propertyName: string | null;\r\n    readonly oldValue: any;\r\n    readonly newValue: any;\r\n    readonly removedIndex: number;\r\n    readonly removedItems: ModelNodesList;\r\n    readonly insertedIndex: number;\r\n    readonly insertedItems: ModelNodesList;\r\n    readonly sortedIndices: number[];\r\n\r\n    constructor(\r\n        init: {\r\n            target: ModelNode | ModelList;\r\n            changeType: number;\r\n            propertyName?: string;\r\n            oldValue?: any;\r\n            newValue?: any;\r\n            removedIndex?: number,\r\n            removedItems?: ModelNode[],\r\n            insertedIndex?: number,\r\n            insertedItems?: ModelNode[],\r\n            sortedIndices?: number[]\r\n        }\r\n    ) {\r\n        this.target = init.target;\r\n        this.changeType = init.changeType;\r\n        this.propertyName = init.propertyName ?? null;\r\n        this.oldValue = init.oldValue ?? undefined;\r\n        this.newValue = init.newValue ?? undefined;\r\n        this.removedIndex = init.removedIndex ?? 0;\r\n        this.removedItems = new ModelNodesList(init.removedItems ?? []);\r\n        this.insertedIndex = init.insertedIndex ?? 0;\r\n        this.insertedItems = new ModelNodesList(init.insertedItems ?? []);\r\n        this.sortedIndices = init.sortedIndices ?? [];\r\n    }\r\n\r\n    static get PROPERTY_CHANGE(): number {\r\n        return 1;\r\n    }\r\n\r\n    static get LIST_REMOVE(): number {\r\n        return 2;\r\n    }\r\n\r\n    static get LIST_INSERT(): number {\r\n        return 3;\r\n    }\r\n\r\n    static get LIST_SORT(): number {\r\n        return 4;\r\n    }\r\n\r\n    get PROPERTY_CHANGE(): number {\r\n        return ModelChangeRecordBase.PROPERTY_CHANGE;\r\n    }\r\n\r\n    get LIST_REMOVE(): number {\r\n        return ModelChangeRecordBase.LIST_REMOVE;\r\n    }\r\n\r\n    get LIST_INSERT(): number {\r\n        return ModelChangeRecordBase.LIST_INSERT;\r\n    }\r\n\r\n    get LIST_SORT(): number {\r\n        return ModelChangeRecordBase.LIST_SORT;\r\n    }\r\n}\r\n\r\nvar ModelChangeRecord: ModelChangeRecordConstructor = ModelChangeRecordBase;\r\n\r\ninterface ModelNodesListConstructor {\r\n    prototype: ModelNodesList;\r\n    new(items: any[]): ModelNodesList;\r\n}\r\n\r\ninterface ModelNodesList {\r\n    get length(): number;\r\n    item(index: number): ModelNode | null;\r\n    values(): IterableIterator<ModelNode>;\r\n}\r\n\r\nclass ModelNodesListBase implements ModelNodesList {\r\n    #items: ModelNode[];\r\n\r\n    constructor(items: ModelNode[]) {\r\n        this.#items = items.slice();\r\n    }\r\n\r\n    get length(): number {\r\n        return this.#items.length;\r\n    }\r\n\r\n    item(index: number): ModelNode | null {\r\n        return this.#items[index] ?? null;\r\n    }\r\n\r\n    values(): IterableIterator<ModelNode> {\r\n        return this.#items.values();\r\n    }\r\n}\r\n\r\nvar ModelNodesList: ModelNodesListConstructor = ModelNodesListBase;\r\n\r\ninterface ModelEventConstructor {\r\n    prototype: ModelEvent;\r\n    new(type: string): ModelEvent;\r\n}\r\n\r\ninterface ModelEvent {\r\n    readonly type: string;\r\n    readonly currentTarget: ModelEventTarget | null;\r\n    readonly target: ModelEventTarget | null;\r\n}\r\n\r\nclass ModelEventBase implements ModelEvent {\r\n    readonly type: string;\r\n\r\n    #currentTarget: ModelEventTarget | null;\r\n    #target: ModelEventTarget | null;\r\n\r\n    constructor(type: string) {\r\n        this.type = type;\r\n        this.#currentTarget = null;\r\n        this.#target = null;\r\n    }\r\n\r\n    get currentTarget(): ModelEventTarget | null {\r\n        return this.#currentTarget;\r\n    }\r\n\r\n    get target(): ModelEventTarget | null {\r\n        return this.#target;\r\n    }\r\n\r\n    static ModelEventTargetAccessor? = new class ModelEventTargetAccessor {\r\n        setCurrentTarget(event: ModelEvent, currentTarget: ModelEventTarget): void {\r\n            if (event instanceof ModelEventBase) {\r\n                event.#currentTarget = currentTarget;\r\n            }\r\n        }\r\n\r\n        setTarget(event: ModelEvent, target: ModelEventTarget): void {\r\n            if (event instanceof ModelEventBase) {\r\n                event.#target = target;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ninterface ModelEventTargetAccessor {\r\n    setCurrentTarget(event: ModelEvent, currentTarget: ModelEventTarget): void;\r\n    setTarget(event: ModelEvent, target: ModelEventTarget): void;\r\n}\r\n\r\nvar ModelEventTargetAccessor: ModelEventTargetAccessor = ModelEventBase.ModelEventTargetAccessor!;\r\ndelete ModelEventBase.ModelEventTargetAccessor;\r\n\r\nvar ModelEvent: ModelEventConstructor = ModelEventBase;\r\n\r\ninterface ModelEventTargetConstructor {\r\n    prototype: ModelEventTarget;\r\n    new(): ModelEventTarget;\r\n}\r\n\r\ninterface ModelEventTarget {\r\n    addEventListener(type: string, callback: (event: ModelEvent) => void): void;\r\n    removeEventListener(type: string, callback: (event: ModelEvent) => void): void;\r\n    dispatchEvent(event: ModelEvent): void;\r\n    receiveEvent(event: ModelEvent): void;\r\n}\r\n\r\nclass ModelEventTargetBase implements ModelEventTarget {\r\n    #callbacks: Map<string, ((event: ModelEvent) => void)[]>;\r\n\r\n    constructor() {\r\n        this.#callbacks = new Map();\r\n    }\r\n\r\n    receiveEvent(event: ModelEvent): void {\r\n        const {type} = event;\r\n        const callbacks = this.#callbacks.get(type);\r\n        ModelEventTargetAccessor.setCurrentTarget(event, this);\r\n        if (callbacks) {\r\n            callbacks.forEach((callback_i) => {\r\n                callback_i(event);\r\n            });\r\n        }\r\n    }\r\n\r\n    addEventListener(type: string, callback: (event: ModelEvent) => void): void {\r\n        const callbacks = this.#callbacks.get(type);\r\n        if (callbacks) {\r\n            callbacks.push(callback);\r\n        }\r\n        else {\r\n            this.#callbacks.set(type, [callback]);\r\n        }\r\n    }\r\n\r\n    removeEventListener(type: string, callback: (event: ModelEvent) => void): void {\r\n        const callbacks = this.#callbacks.get(type);\r\n        if (callbacks) {\r\n            const callbackIndex = callbacks.findIndex(\r\n                callback_i => callback_i == callback\r\n            );\r\n            if (callbackIndex > -1) {\r\n                callbacks.splice(callbackIndex, 1);\r\n            }\r\n            if (callbacks.length == 0) {\r\n                this.#callbacks.delete(type);\r\n            }\r\n        }\r\n    }\r\n\r\n    dispatchEvent(event: ModelEvent): void {\r\n        ModelEventTargetAccessor.setTarget(event, this);\r\n        this.receiveEvent(event);\r\n    }\r\n}\r\n\r\nvar ModelEventTarget: ModelEventTargetConstructor = ModelEventTargetBase;\r\n\r\ninterface ModelNodeConstructor {\r\n    prototype: ModelNode;\r\n    new(): ModelNode;\r\n}\r\n\r\ninterface ModelNode extends ModelEventTarget {\r\n    readonly parentNode: ModelNode | null;\r\n    setParent(parentNode: ModelNode | null): void;\r\n    getRecords(): ModelChangeRecord[];\r\n    beginChanges(): void;\r\n    endChanges(): void;\r\n}\r\n\r\ninterface ModelNodeRecordsAccessor {\r\n    triggerChange(node: ModelNode, property: string, oldValue: any, newValue: any): void;\r\n    handleRecord(node: ModelNode, record: ModelChangeRecord): void;\r\n}\r\n\r\nclass ModelNodeBase extends ModelEventTargetBase implements ModelNode {\r\n    #parentNode: ModelNode | null;\r\n    #records: ModelChangeRecord[];\r\n    #isRecording: boolean;\r\n\r\n    constructor() {\r\n        super();\r\n        this.#parentNode = null;\r\n        this.#records = [];\r\n        this.#isRecording = false;\r\n    }\r\n\r\n    get parentNode(): ModelNode | null {\r\n        return this.#parentNode;\r\n    }\r\n\r\n    setParent(parentNode: ModelNode | null): void {\r\n        if (parentNode !== null) {\r\n            let isCyclicReference = parentNode == this;\r\n            let {parentNode: ancestorNode} = parentNode;\r\n            while (!isCyclicReference && ancestorNode !== null) {\r\n                ({parentNode: ancestorNode} = ancestorNode);\r\n                isCyclicReference = ancestorNode == this;\r\n            }\r\n            if (!isCyclicReference) {\r\n                this.#parentNode = parentNode;\r\n            }\r\n            else {\r\n                throw new TypeError(\"Failed to set parent on ModelNode: circular reference detected in the hierarchy.\");\r\n            }\r\n        }\r\n        else {\r\n            this.#parentNode = null;\r\n        }\r\n    }\r\n    \r\n    beginChanges(): void {\r\n        this.#isRecording = true;\r\n    }\r\n\r\n    endChanges(): void {\r\n        this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n        this.#records.splice(0);\r\n        this.#isRecording = false;\r\n    }\r\n\r\n    getRecords(): ModelChangeRecord[] {\r\n        return this.#records.slice();\r\n    }\r\n\r\n    receiveEvent(event: ModelEvent): void {\r\n        super.receiveEvent(event);\r\n        const {parentNode} = this;\r\n        if (parentNode) {\r\n            parentNode.receiveEvent(event);\r\n        }\r\n    }\r\n\r\n    #triggerChange(property: string, oldValue: any, newValue: any): void {\r\n        const records = this.#records;\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.PROPERTY_CHANGE,\r\n            propertyName: property,\r\n            oldValue, newValue\r\n        });\r\n        records.push(record);\r\n        if (!this.#isRecording) {\r\n            this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n            records.splice(0);\r\n        }\r\n    }\r\n\r\n    #handleRecord(record: ModelChangeRecord): void {\r\n        this.#records.push(record);\r\n        if (!this.#isRecording) {\r\n            this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n            this.#records.splice(0);\r\n        }\r\n    }\r\n\r\n    static ModelNodeRecordsAccessor? = new class ModelNodeRecordsAccessor {\r\n        triggerChange(node: ModelNode, property: string, oldValue: any, newValue: any): void {\r\n            if (node instanceof ModelNodeBase) {\r\n                node.#triggerChange(property, oldValue, newValue);\r\n            }\r\n        }\r\n\r\n        handleRecord(node: ModelNode, record: ModelChangeRecord): void {\r\n            if (node instanceof ModelNodeBase) {\r\n                node.#handleRecord(record);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar ModelNodeRecordsAccessor: ModelNodeRecordsAccessor = ModelNodeBase.ModelNodeRecordsAccessor!;\r\ndelete ModelNodeBase.ModelNodeRecordsAccessor;\r\n\r\nvar ModelNode: ModelNodeConstructor = ModelNodeBase;\r\n\r\ninterface ModelPropertyDecorator {\r\n    (): <Model extends ModelObject>(target: Model, property: string) => void;\r\n}\r\n\r\nconst ModelProperty: ModelPropertyDecorator = function() {\r\n    return (\r\n        target: ModelObject, property: string\r\n    ) => {\r\n        const {constructor} = target;\r\n        const {prototype} = constructor;\r\n        const setter = function(this: ModelObject, value: any) {\r\n            const oldValue = ModelObjectPropertiesAccessor.getProperty(this, property);\r\n            ModelObjectPropertiesAccessor.setProperty(this, property, value);\r\n            if (value !== oldValue) {\r\n                ModelNodeRecordsAccessor.triggerChange(this, property, oldValue, value);\r\n            }\r\n            return true;\r\n        };\r\n        const getter = function(this: ModelObject) {\r\n            return ModelObjectPropertiesAccessor.getProperty(this, property);\r\n        };\r\n        Object.defineProperty(prototype, property, {\r\n            set: setter,\r\n            get: getter,\r\n            enumerable: true\r\n        });\r\n    }\r\n}\r\n\r\ninterface ModelObjectConstructor {\r\n    prototype: ModelObject;\r\n    new(): ModelObject;\r\n}\r\n\r\ninterface ModelObject extends ModelNode {}\r\n\r\ninterface ModelObjectPropertiesAccessor {\r\n    setProperty(node: ModelNode, property: string, value: any): void;\r\n    getProperty(node: ModelNode, property: string,): any;\r\n}\r\n\r\nclass ModelObjectBase extends ModelNodeBase implements ModelObject {\r\n    #properties: Map<string, any>;\r\n\r\n    constructor() {\r\n        super();\r\n        this.#properties = new Map();\r\n    }\r\n\r\n    static ModelObjectPropertiesAccessor? = new class ModelPropertiesAccessor {\r\n        setProperty(node: ModelObject, property: string, value: any): void {\r\n            if (node instanceof ModelObjectBase) {\r\n                node.#properties.set(property, value);\r\n            }\r\n        }\r\n\r\n        getProperty(node: ModelObject, property: string): any {\r\n            if (node instanceof ModelObjectBase) {\r\n                return node.#properties.get(property);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar ModelObjectPropertiesAccessor: ModelObjectPropertiesAccessor = ModelObjectBase.ModelObjectPropertiesAccessor!;\r\ndelete ModelObjectBase.ModelObjectPropertiesAccessor;\r\n\r\nvar ModelObject: ModelObjectConstructor = ModelObjectBase;\r\n\r\ninterface ModelListConstructor {\r\n    prototype: ModelList;\r\n    new<Model extends ModelNode>(): ModelList<Model>;\r\n    new<Model extends ModelNode>(items: Model[]): ModelList<Model>;\r\n}\r\n\r\ninterface ModelList<Model extends ModelNode = ModelNode> extends ModelNode {\r\n    readonly parentNode: ModelNode | null;\r\n    readonly length: number;\r\n    index(item: Model): number;\r\n    get(index: number): Model | null;\r\n    values(): IterableIterator<Model>;\r\n    sort(compareFunction: (item_a: any, item_b: any) => number): void;\r\n    insert(index: number, ...items: Model[]): void;\r\n    prepend(...items: Model[]): void;\r\n    append(...items: Model[]): void;\r\n    remove(item: Model): void;\r\n    clear(): void;\r\n}\r\n\r\nclass ModelListBase<Model extends ModelNode = ModelNode> extends ModelNodeBase implements ModelList<Model> {\r\n    #items: Model[];\r\n\r\n    constructor()\r\n    constructor(items: Model[])\r\n    constructor(items?: Model[]) {\r\n        super();\r\n        this.#items = items?.slice() ?? [];\r\n    }\r\n\r\n    setParent(parentNode: ModelNode | null): void {\r\n        super.setParent(parentNode);\r\n        this.#items.forEach((item_i) => {\r\n            item_i.setParent(parentNode);\r\n        });\r\n    }\r\n\r\n    get length(): number {\r\n        return this.#items.length;\r\n    }\r\n\r\n    get(index: number): Model | null {\r\n        return this.#items[index] ?? null;\r\n    }\r\n\r\n    index(item: Model): number {\r\n        return this.#items.indexOf(item);\r\n    }\r\n\r\n    values(): IterableIterator<Model> {\r\n        return this.#items.values();\r\n    }\r\n\r\n    sort(compareFunction: (item_a: any, item_b: any) => number): void {\r\n        const items = this.#items;\r\n        const indexedItems = items.map(\r\n            (item_i, i) => {\r\n                return {\r\n                    item: item_i,\r\n                    index: i\r\n                };\r\n            }\r\n        );\r\n        indexedItems.sort(\r\n            (indexedItem_a, indexedItem_b) => {\r\n                return compareFunction(\r\n                    indexedItem_a.item, indexedItem_b.item\r\n                )\r\n            }\r\n        );\r\n        this.#items = indexedItems.map(indexedItem_i => indexedItem_i.item);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_SORT,\r\n            sortedIndices: indexedItems.map(indexedItem_i => indexedItem_i.index)\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n\r\n    prepend(...items: Model[]): void {\r\n        const _items = this.#items;\r\n        const {parentNode} = this;\r\n        if (parentNode) {\r\n            items.forEach(item_i => {\r\n                item_i.setParent(parentNode);\r\n            });\r\n        }\r\n        _items.splice(0, 0, ...items);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_INSERT,\r\n            insertedIndex: 0,\r\n            insertedItems: items\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n\r\n    append(...items: Model[]): void {\r\n        const _items = this.#items;\r\n        const {length} = _items;\r\n        const {parentNode} = this;\r\n        if (parentNode) {\r\n            items.forEach(item_i => {\r\n                item_i.setParent(parentNode);\r\n            });\r\n        }\r\n        _items.push(...items);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_INSERT,\r\n            insertedIndex: length,\r\n            insertedItems: items\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n\r\n    insert(index: number, ...items: Model[]): void {\r\n        const _items = this.#items;\r\n        const {length} = _items;\r\n        const positiveIndex = Math.abs(index);\r\n        if (positiveIndex <= length) {\r\n            if (index >= 0) {\r\n                const {parentNode} = this;\r\n                items.forEach(item_i => {\r\n                    item_i.setParent(parentNode);\r\n                });\r\n                if (index < length) {\r\n                    _items.splice(index, 0, ...items);\r\n                }\r\n                else {\r\n                    _items.push(...items);\r\n                }\r\n            }\r\n            else if (index < 0) {\r\n                index = length - index;\r\n                const {parentNode} = this;\r\n                if (parentNode) {\r\n                    items.forEach(item_i => {\r\n                        item_i.setParent(parentNode);\r\n                    });\r\n                }\r\n                _items.splice(index, 0, ...items);\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_INSERT,\r\n                insertedIndex: index,\r\n                insertedItems: items.slice()\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n\r\n    remove(item: Model): void {\r\n        const _items = this.#items;\r\n        const index = _items.indexOf(item);\r\n        if (index > -1) {\r\n            const item = _items.splice(index, 1)[0];\r\n            const {parentNode} = this;\r\n            if (parentNode) {\r\n                item.setParent(null);\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_REMOVE,\r\n                removedIndex: index,\r\n                removedItems: [item]\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n\r\n    clear(): void {\r\n        const items = this.#items;\r\n        const {length} = items;\r\n        if (length > 0) {\r\n            const removedItems = items.splice(0);\r\n            const {parentNode} = this;\r\n            if (parentNode) {\r\n                removedItems.forEach((removedItem_i) => {\r\n                    removedItem_i.setParent(null);\r\n                });\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_REMOVE,\r\n                removedIndex: 0,\r\n                removedItems: removedItems\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n};\r\n\r\nvar ModelList: ModelListConstructor = ModelListBase!;\r\n\r\ninterface ModelChangeObserverConstructor {\r\n    prototype: ModelChangeObserver;\r\n    new(callback: (records: ModelChangeRecord[]) => void): ModelChangeObserver;\r\n}\r\n\r\ninterface ModelChangeObserver {\r\n    observe(node: ModelNode, options: ModelChangeObserverOptions): void;\r\n    unobserve(node: ModelNode): void;\r\n    disconnect(): void;\r\n}\r\n\r\ntype ModelChangeObserverOptions = {\r\n    properties?: boolean;\r\n    propertiesFilter?: string[];\r\n    childList?: boolean;\r\n    subtree?: boolean;\r\n}\r\n\r\nclass ModelChangeObserverBase implements ModelChangeObserver {\r\n    #callback: (records: ModelChangeRecord[]) => void;\r\n    #records: ModelChangeRecord[];\r\n    #disconnected: boolean;\r\n\r\n    #references: WeakMap<ModelNode, {\r\n        listener: (event: ModelEvent) => void,\r\n        options: ModelChangeObserverOptions\r\n    }>;\r\n\r\n    constructor(callback: (records: ModelChangeRecord[]) => void) {\r\n        this.#callback = callback;\r\n        this.#records = [];\r\n        this.#disconnected = false;\r\n        this.#references = new WeakMap();\r\n    }\r\n\r\n    observe(node: ModelNode, options: ModelChangeObserverOptions): void {\r\n        this.#disconnected = false;\r\n        const references = this.#references;\r\n        let reference = references.get(node);\r\n        if (!reference) {\r\n            const listener = this.#handleModelEvent.bind(this);\r\n            node.addEventListener(\"modelchange\", listener);\r\n            reference = {listener, options};\r\n            references.set(node, reference);\r\n        }\r\n        else {\r\n            references.set(node, reference);\r\n        }\r\n    }\r\n\r\n    unobserve(node: ModelNode): void {\r\n        const references = this.#references;\r\n        let reference = references.get(node);\r\n        if (reference) {\r\n            const {listener} = reference;\r\n            node.removeEventListener(\"modelchange\", listener);\r\n        }\r\n    }\r\n\r\n    disconnect(): void {\r\n        this.#records.splice(0);\r\n        this.#disconnected = true;\r\n    }\r\n\r\n    #trigger(): void {\r\n        const records = this.#records.splice(0);\r\n        if (records.length > 0) {\r\n            this.#callback(records);\r\n        }\r\n    }\r\n\r\n    #handleModelEvent(event: ModelEvent): void {\r\n        if (!this.#disconnected) {\r\n            const {target, currentTarget} = event;\r\n            const reference = this.#references.get(<ModelNode>currentTarget);\r\n            if (reference) {\r\n                const {options} = reference;\r\n                const {properties, propertiesFilter, childList, subtree} = options;\r\n                if (subtree) {\r\n                    if (properties && target instanceof ModelNode) {\r\n                        if (propertiesFilter) {\r\n                            this.#records.push(\r\n                                ...target.getRecords()\r\n                                    .filter(record_i => {\r\n                                        const {propertyName} = record_i;\r\n                                        return propertiesFilter.includes(\r\n                                            propertyName!\r\n                                        )\r\n                                    })\r\n                            );\r\n                        }\r\n                        else {\r\n                            this.#records.push(\r\n                                ...target.getRecords()\r\n                            );\r\n                        }\r\n                        this.#trigger();\r\n                    }\r\n                    else if (childList && target instanceof ModelList) {\r\n                        this.#records.push(\r\n                            ...target.getRecords()\r\n                        );\r\n                        this.#trigger();\r\n                    }\r\n                }\r\n                else if (target == currentTarget) {\r\n                    if (properties && target instanceof ModelNode) {\r\n                        if (propertiesFilter) {\r\n                            this.#records.push(\r\n                                ...target.getRecords()\r\n                                    .filter(record_i => {\r\n                                        const {propertyName} = record_i;\r\n                                        return propertiesFilter.includes(\r\n                                            propertyName!\r\n                                        )\r\n                                    })\r\n                            );\r\n                        }\r\n                        else {\r\n                            this.#records.push(\r\n                                ...target.getRecords()\r\n                            );\r\n                        }\r\n                        this.#trigger();\r\n                    }\r\n                    else if (childList && target instanceof ModelList) {\r\n                        this.#records.push(\r\n                            ...target.getRecords()\r\n                        );\r\n                        this.#trigger();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar ModelChangeObserver: ModelChangeObserverConstructor = ModelChangeObserverBase;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEListItemElement } from \"./ListItem\";\r\nimport { HTMLEListItemGroupElement } from \"./ListItemGroup\";\r\n\r\nexport { HTMLEListElement };\r\n\r\ninterface HTMLEListElementConstructor {\r\n    prototype: HTMLEListElement;\r\n    new(): HTMLEListElement;\r\n}\r\n\r\ninterface HTMLEListElement extends HTMLElement {\r\n    readonly shadowRoot: ShadowRoot;\r\n    readonly activeItem: HTMLEListItemElement | null;\r\n    readonly dropTargetItem: HTMLEListItemElement | null;\r\n    name: string;\r\n    droptarget: boolean;\r\n    items(): HTMLEListItemElement[];\r\n    beginSelection(): void;\r\n    endSelection(): void;\r\n    selectedItems(): HTMLEListItemElement[];\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"e-list\": HTMLEListElement,\r\n    }\r\n}\r\n\r\nvar shadowTemplate: HTMLTemplateElement;\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-list\"\r\n})\r\nclass HTMLEListElementBase extends HTMLElement implements HTMLEListElement {\r\n\r\n    readonly shadowRoot!: ShadowRoot;\r\n\r\n    get activeItem(): HTMLEListItemElement | null {\r\n        return this.querySelector<HTMLEListItemElement>(\r\n            \"e-listitem[active]\"\r\n        );\r\n    }\r\n\r\n    get dropTargetItem(): HTMLEListItemElement | null {\r\n        return this.querySelector<HTMLEListItemElement>(\r\n            \"e-listitem[droptarget]\"\r\n        );\r\n    }\r\n\r\n    @AttributeProperty({type: String})\r\n    name!: string;\r\n    \r\n    @AttributeProperty({type: Boolean})\r\n    droptarget!: boolean;\r\n\r\n    #onSelection: boolean;\r\n    #hasSelectionChanged: boolean;\r\n    #walker: TreeWalker;\r\n\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(\r\n            element(\"style\", {\r\n                children: [\r\n                    /*css*/`\r\n\r\n                    `\r\n                ]\r\n            }),\r\n            element(\"slot\", {\r\n                children: [\r\n                    element(\"slot\")\r\n                ]\r\n            })\r\n        );\r\n        style = /*css*/`\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--focused-item-outline-color);\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n\r\n    items(): HTMLEListItemElement[] {\r\n        return Array.from(this.querySelectorAll<HTMLEListItemElement>(\r\n            \":is(:scope, :scope > e-listitemgroup) > e-listitem\"\r\n        ));\r\n    }\r\n    \r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(\r\n            this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this)\r\n        );\r\n        this.#onSelection = false;\r\n        this.#hasSelectionChanged = false;\r\n        const shadowRoot = this.attachShadow({mode: \"open\"});\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(\r\n            shadowTemplate.content.cloneNode(true)\r\n        );\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dragend\", this.#handleDragEndEvent.bind(this));\r\n        this.addEventListener(\"dragenter\", this.#handleDragEnterEvent.bind(this));\r\n        this.addEventListener(\"dragover\", this.#handleDragOverEvent.bind(this));\r\n        this.addEventListener(\"dragleave\", this.#handleDragLeaveEvent.bind(this));\r\n        this.addEventListener(\"dragstart\", this.#handleDragStartEvent.bind(this));\r\n        this.addEventListener(\"drop\", this.#handleDropEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        const tabIndex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabIndex === null ? 0 : parseInt(tabIndex);\r\n    }\r\n\r\n    beginSelection(): void {\r\n        this.#onSelection = true;\r\n    }\r\n\r\n    endSelection(): void {\r\n        this.#onSelection = false;\r\n        if (this.#hasSelectionChanged) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", {bubbles: true}));\r\n            this.#hasSelectionChanged = false;\r\n        }\r\n    }\r\n\r\n    selectedItems(): HTMLEListItemElement[] {\r\n        const selectedItems = [];\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        let item = this.#firstItem();\r\n        while (item !== null) {\r\n            if (item.selected) {\r\n                selectedItems.push(item);\r\n            }\r\n            item = this.#nextItem(item);\r\n        }\r\n        return selectedItems;\r\n    }\r\n\r\n    #walkerNodeFilter(node: Node): number {\r\n        if (node instanceof HTMLEListItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEListItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n\r\n    #getItemsRange(from: HTMLEListItemElement, to: HTMLEListItemElement): HTMLEListItemElement[] {\r\n        const items = this.items();\r\n        const fromIndex = items.indexOf(from);\r\n        const toIndex = items.indexOf(to);\r\n        if (fromIndex > -1 && toIndex > -1) {\r\n            if (from == to) {\r\n                return [from];\r\n            }\r\n            return items.slice(\r\n                Math.min(fromIndex, toIndex),\r\n                Math.max(fromIndex, toIndex) + 1\r\n            );\r\n        }\r\n        return [];\r\n    }\r\n\r\n    #setSelection(...items: HTMLEListItemElement[]): void {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        selectedItems.forEach((selectedItem_i) => {\r\n            if (!items.includes(selectedItem_i)) {\r\n                selectedItem_i.selected = false;\r\n            }\r\n        });\r\n        items.forEach((item_i) => {\r\n            if (this.contains(item_i) && !item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n\r\n    #addToSelection(...items: HTMLEListItemElement[]): void {\r\n        this.beginSelection();\r\n        items.forEach((item_i) => {\r\n            if (!item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n\r\n    #removeFromSelection(...items: HTMLEListItemElement[]): void {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        items.forEach((item_i) => {\r\n            if (selectedItems.includes(item_i)) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n\r\n    #clearSelection(): void {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        selectedItems.forEach((item_i) => {\r\n            if (item_i.selected) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n\r\n    #setActiveItem(item: HTMLEListItemElement | null): void {\r\n        const {activeItem, items} = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n            activeItem.tabIndex = -1;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n            item.tabIndex = 0;\r\n        }\r\n    }\r\n\r\n    #setDropTargetItem(item: HTMLEListItemElement | null): void {\r\n        const {dropTargetItem} = this;\r\n        if (dropTargetItem !== null && dropTargetItem !== item) {\r\n            dropTargetItem.droptarget = false;\r\n        }\r\n        if (item !== null) {\r\n            this.droptarget = true;\r\n            item.droptarget = true;\r\n        }\r\n        else {\r\n            this.droptarget = false;\r\n        }\r\n    }\r\n\r\n    #firstItem(): HTMLEListItemElement | null {\r\n        const walker = this.#walker;\r\n        const {root} = walker;\r\n        walker.currentNode = root;\r\n        return <HTMLEListItemElement | null>walker.firstChild();\r\n    }\r\n\r\n    #lastItem(): HTMLEListItemElement | null {\r\n        const walker = this.#walker;\r\n        const {root} = walker;\r\n        walker.currentNode = root;\r\n        return <HTMLEListItemElement | null>walker.lastChild();\r\n    }\r\n    \r\n    #previousItem(item: HTMLEListItemElement): HTMLEListItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = <HTMLEListItemElement | null>walker.previousNode();\r\n        return previousItem;\r\n    }\r\n\r\n    #nextItem(item: HTMLEListItemElement): HTMLEListItemElement | null {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const nextItem = <HTMLEListItemElement | null>walker.nextNode();\r\n        return nextItem;\r\n    }\r\n\r\n    #handleContextMenuEvent(event: MouseEvent) {\r\n        const {target} = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            const selectedItems = this.selectedItems();\r\n            if (!selectedItems.includes(target)) {\r\n                this.#setSelection(target);\r\n            }\r\n            target.focus({preventScroll: true});\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    #handleDragEndEvent(): void {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n\r\n    #handleDragEnterEvent(event: DragEvent): void {\r\n        const {target} = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            this.#setDropTargetItem(target);\r\n        }\r\n        event.preventDefault();\r\n    }\r\n    \r\n    #handleDragOverEvent(event: DragEvent): void {\r\n        event.preventDefault();\r\n    }\r\n\r\n    #handleDragLeaveEvent(event: DragEvent): void {\r\n        const {relatedTarget} = event;\r\n        let rootNode = <Node>relatedTarget;\r\n        while (!(rootNode instanceof HTMLEListItemElement || rootNode instanceof Document)) {\r\n            rootNode = rootNode.getRootNode();\r\n            if (rootNode instanceof ShadowRoot) {\r\n                rootNode = rootNode.host;\r\n            }\r\n        }\r\n        if (rootNode instanceof Document) {\r\n            this.#setDropTargetItem(null);\r\n        }\r\n    }\r\n\r\n    #handleDragStartEvent(event: DragEvent): void {\r\n        const {target} = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            const selectedItems = this.selectedItems();\r\n            if (!selectedItems.includes(target)) {\r\n                this.#setSelection(target);\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleDropEvent(): void {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n\r\n    #handleFocusEvent(event: FocusEvent): void {\r\n        const {relatedTarget} = event;\r\n        const {activeItem} = this;\r\n        if (activeItem && relatedTarget !== activeItem) {\r\n            activeItem.focus();\r\n        }\r\n    }\r\n\r\n    #handleFocusInEvent(event: FocusEvent): void {\r\n        const {target} = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            this.#setActiveItem(target);\r\n        }\r\n    }\r\n\r\n    #handleKeyDownEvent(event: KeyboardEvent) {\r\n        const {key} = event;\r\n        const {activeItem} = this;\r\n        switch (key) {\r\n            case \"a\": {\r\n                const {ctrlKey} = event;\r\n                if (ctrlKey) {\r\n                    const walker = this.#walker;\r\n                    const {root} = walker;\r\n                    const firstItem = <HTMLEListItemElement>(\r\n                        walker.currentNode = walker.parentNode() ?? root, walker.firstChild()\r\n                    );\r\n                    const lastItem = <HTMLEListItemElement>(\r\n                        walker.currentNode = walker.parentNode() ?? root, walker.lastChild()\r\n                    );\r\n                    const range = this.#getItemsRange(\r\n                        firstItem,\r\n                        lastItem\r\n                    );\r\n                    if (range) {\r\n                        this.#setSelection(...range);\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case \"ArrowUp\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({preventScroll: true});\r\n                        const {shiftKey} = event;\r\n                        if (shiftKey) {\r\n                            previousItem.selected ?\r\n                                this.#removeFromSelection(previousItem) :\r\n                                this.#addToSelection(previousItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.#firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({preventScroll: true});\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({preventScroll: true});\r\n                        const {shiftKey} = event;\r\n                        if (shiftKey) {\r\n                            nextItem.selected ?\r\n                                this.#removeFromSelection(nextItem) :\r\n                                this.#addToSelection(nextItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({preventScroll: true});\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.#firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({preventScroll: true});\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({preventScroll: true});\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                const {activeItem} = this;\r\n                if (activeItem) {\r\n                    this.#setSelection(activeItem);\r\n                    activeItem.click();\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                this.#clearSelection();\r\n                this.#setActiveItem(null);\r\n                this.focus();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleMouseDownEvent(event: MouseEvent): void {\r\n        const {target, ctrlKey, shiftKey} = event;\r\n        const selectedItems = this.selectedItems();\r\n        if (target instanceof HTMLEListItemElement) {\r\n            if (!shiftKey && !ctrlKey) {\r\n                this.#setSelection(target);\r\n            }\r\n            else if (ctrlKey) {\r\n                (!target.selected) ?\r\n                    this.#addToSelection(target) :\r\n                    this.#removeFromSelection(target);\r\n                event.stopPropagation();\r\n            }\r\n            else if (shiftKey) {\r\n                const lastSelectedItem = selectedItems[selectedItems.length - 1];\r\n                if (lastSelectedItem) {\r\n                    const range = this.#getItemsRange(\r\n                        lastSelectedItem,\r\n                        target\r\n                    );\r\n                    if (range) {\r\n                        if (selectedItems.includes(target)) {\r\n                            this.#removeFromSelection(...range);\r\n                        }\r\n                        else {\r\n                            this.#addToSelection(...range);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.#setSelection(target);\r\n                }\r\n                event.stopPropagation();\r\n            }\r\n        }\r\n    }\r\n\r\n    #handleSelectEvent(): void {\r\n        if (!this.#onSelection) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", {bubbles: true}));\r\n        }\r\n    }\r\n\r\n    #handleSlotChangeEvent(event: Event): void {\r\n        const {target} = event;\r\n        const assignedItems = <HTMLEListItemElement[]>(<HTMLSlotElement>target)\r\n            .assignedElements()\r\n            .filter(\r\n                element_i => element_i instanceof HTMLEListItemElement\r\n            );\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n}\r\n\r\nvar HTMLEListElement: HTMLEListElementConstructor = HTMLEListElementBase;"],"names":["AttributeProperty","init","target","property","constructor","prototype","propertyName","String","defaultValue","observed","name","observedAttributes","Reflect","get","Array","isArray","push","Object","defineProperty","value","writable","type","Boolean","this","hasAttribute","set","setAttribute","removeAttribute","val","getAttribute","JSON","parse","stringify","Number","parseFloat","CustomElement","elementCtor","options","customElements","define","QueryProperty","propertyKey","selector","getter","withinShadowRoot","shadowRoot","querySelector","element","tagName","attributes","dataset","children","listeners","document","createElement","entries","forEach","attributeName","attributeValue","undefined","toggleAttribute","elementDataset","keys","datasetEntry_i","append","from","name_i","listener_i","addEventListener","reactiveElementsMap","WeakMap","FinalizationRegistry","heldValue","model","reactiveElement","reactiveElementsMapEntry","reactiveElementsArray","splice","indexOf","records","record_i","oldValue","newValue","reactiveElement_i","elementRef","react","properties","deref","includes","reactiveChildElementsMap","list","reactiveChildElement","reactiveChildrenElementsMapEntry","reactiveChildElementsArray","range","values","length","listLength","reactiveChildElements_i","parentRef","mapping","placeholder","parent","firstChild","childrenCount","removeChild","changeType","LIST_INSERT","LIST_REMOVE","LIST_SORT","insertedIndex","insertedItems","insertedItemsArray","map","before","removedIndex","removedItems","removedCount","createRange","removeEndIndex","setStartBefore","setEndAfter","deleteContents","sortedIndices","childrenArray","filter","index_i","camelToTrain","str","replace","toLowerCase","shadowTemplate","style","HTMLEListItemElementBase","HTMLElement","super","attachShadow","mode","adoptedStylesheet","CSSStyleSheet","adoptedStyleSheets","content","cloneNode","bind","badge","toolbar","menu","connectedCallback","tabIndex","attributeChangedCallback","dispatchEvent","Event","bubbles","labelPart","textContent","event","slotName","assignedElements","H","HTMLSpanElement","HTMLEListItemElement","HTMLEListItemGroupElementBase","element_i","item_i","i","posinset","HTMLEListItemGroupElement","toggleAnimations","HTMLEMenuElementBase","createTreeWalker","NodeFilter","SHOW_ELEMENT","items","querySelectorAll","activeIndex","activeItem","tabindex","parseInt","positionContextual","x","y","width","menuWidth","height","menuHeight","getBoundingClientRect","scrollX","scrollY","window","left","top","clientWidth","clientHeight","body","overflowX","overflowY","setProperty","firstItem","walker","currentNode","root","collapse","find","contains","node","FILTER_ACCEPT","FILTER_SKIP","FILTER_REJECT","lastChild","item","previousNode","nextNode","targetItem","closest","checked","radio_i","toggle","nearestItem","relatedTarget","contextual","remove","error","expanded","key","focus","preventScroll","stopPropagation","expand","click","composedPath","target_i","HTMLEMenuElement","blur","cancel","toggleAnimation","animate","duration","finished","then","catch","finally","delete","clientX","clientY","right","bottom","intersectsWithMouse","containsRelatedTarget","assign","HTMLEMenuItemElementBase","internals","attachInternals","role","ariaChecked","ariaDisabled","ariaExpanded","ariaLabel","force","menuStyle","itemTop","itemBottom","itemLeft","itemRight","offsetParent","offsetLeft","offsetTop","closestMenu","closestMenuTop","closestMenuLeft","part","HTMLEMenuItemElement","EMenuItem","label","trigger","slot","title","button","checkbox","radio","submenu","HTMLEMenuItemGroupElementBase","HTMLEMenuItemGroupElement","radios","wasExpandedOnMouseDown","HTMLEToolBarElementBase","previousSibling","nextSibling","active","pressed","menubutton","select","previousItem","nextItem","lastItem","HTMLEToolBarElement","iconPart","HTMLEToolBarItemElementBase","prepend","HTMLEToolBarItemElement","EToolBarItem","HTMLEToolBarItemGroupElementBase","HTMLEToolBarItemGroupElement","ModelChangeRecordBase","ModelNodesList","PROPERTY_CHANGE","ModelChangeRecord","slice","index","ModelEventBase","currentTarget","ModelEventTargetAccessor","setCurrentTarget","setTarget","ModelEvent","ModelEventTargetBase","Map","receiveEvent","callbacks","callback_i","callback","removeEventListener","callbackIndex","findIndex","ModelNodeBase","parentNode","setParent","isCyclicReference","ancestorNode","TypeError","beginChanges","endChanges","getRecords","record","ModelNodeRecordsAccessor","triggerChange","handleRecord","ModelNode","ModelObjectBase","ModelObjectPropertiesAccessor","getProperty","ModelList","sort","compareFunction","indexedItems","indexedItem_a","indexedItem_b","indexedItem_i","_items","insert","Math","abs","clear","removedItem_i","reference","propertiesFilter","childList","subtree","ModelChangeObserver","observe","references","listener","unobserve","disconnect","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","enumerable","obj","prop","hasOwnProperty","call","HTMLEListElementBase","dropTargetItem","beginSelection","endSelection","selectedItems","selected","to","fromIndex","toIndex","min","max","selectedItem_i","droptarget","preventDefault","rootNode","Document","getRootNode","ShadowRoot","host","ctrlKey","shiftKey","lastSelectedItem"],"sourceRoot":""}