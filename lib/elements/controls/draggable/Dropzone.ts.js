(()=>{"use strict";var e={9372:(e,t,r)=>{r.d(t,{GF:()=>a,bG:()=>o,b_:()=>i});var s=r(4141),n=r(1827);const a=function(e){return(t,r)=>{const{constructor:s}=t,{prototype:a}=s,i=String(r),{defaultValue:o=null,observed:c=!1,name:d=(0,n.cc)(i)}=e;if(c){const e=Reflect.get(s,"observedAttributes",s);Array.isArray(e)?e.push(d):Object.defineProperty(s,"observedAttributes",{value:[d],writable:!1})}const{type:l}=e;switch(l){case Boolean:Object.defineProperty(a,i,{get:function(){return this.hasAttribute(d)},set:function(e){e?this.setAttribute(d,""):this.removeAttribute(d)}});break;case Object:Object.defineProperty(a,i,{get:function(){const e=this.getAttribute(d);return null!==e?JSON.parse(e):o},set:function(e){null!==e?this.setAttribute(d,JSON.stringify(e)):this.removeAttribute(d)}});break;case Number:Object.defineProperty(a,i,{get:function(){const e=this.getAttribute(d);return null!==e?parseFloat(e):o},set:function(e){null!==e?this.setAttribute(d,e):this.removeAttribute(d)}});break;default:Object.defineProperty(a,i,{get:function(){const e=this.getAttribute(d);return null!==e?e:o},set:function(e){null!==e?this.setAttribute(d,e):this.removeAttribute(d)}})}}},i=function(e){return t=>{const{name:r,options:s}=e;return customElements.get(r)||customElements.define(r,t,s),t}};function o(e,t){if(t){const{options:r,attributes:s,dataset:a,children:i,listeners:o}=t,c=document.createElement(e,r);if(s&&Object.entries(s).forEach((([e,t])=>{void 0!==t&&("boolean"==typeof t?c.toggleAttribute((0,n.cc)(e),t):c.setAttribute((0,n.cc)(e),String(t)))})),a){const{dataset:e}=c;Object.keys(a).forEach((t=>{e[t]=String(a[t])}))}return i&&("function"==typeof i?i(c):"object"==typeof i&&"length"in i?c.append(...Array.from(i)):c.append(i)),o&&Object.entries(o).forEach((([e,t])=>{Array.isArray(t)?c.addEventListener(e,t[0],t[1]):c.addEventListener(e,t)})),c}return document.createElement(e)}const c=new WeakMap;new FinalizationRegistry((e=>{const{model:t,reactiveElement:r}=e,s=c.get(t);if(void 0!==s){const{reactiveElementsArray:e}=s;e.splice(e.indexOf(r),1)}})),new s.KY((e=>{e.forEach((e=>{const{target:t,propertyName:r,oldValue:s,newValue:n}=e,{reactiveElementsArray:a}=c.get(t);a.forEach((e=>{const{elementRef:t,react:a,properties:i}=e,o=t.deref();o&&i.includes(r)&&a(o,r,s,n)}))}))}));const d=new WeakMap;new FinalizationRegistry((e=>{const{list:t,reactiveChildElement:r}=e,s=d.get(t);if(s){const{reactiveChildElementsArray:e}=s;e.splice(e.indexOf(r),1)}})),new s.KY((e=>{let t=null;Array.from(e.values()).forEach((e=>{const{target:r}=e,s=r,{length:n}=s,{reactiveChildElementsArray:a}=d.get(s);a.forEach((r=>{const{parentRef:s,mapping:a,placeholder:i}=r,o=s.deref();if(o){const{firstChild:r,children:s}=o,{length:c}=s;i&&n>0&&r==i&&o.removeChild(i);const{changeType:d,LIST_INSERT:l,LIST_REMOVE:h,LIST_SORT:p}=e;switch(d){case l:{const{insertedIndex:t,insertedItems:r}=e,n=Array.from(r.values()).map(a),{length:i}=s;t<i?s[t].before(...n):o.append(...n);break}case h:{const{removedIndex:r,removedItems:n}=e,{length:a}=n;t=t??document.createRange();const i=r+(a-1);i<c&&(t.setStartBefore(s[r]),t.setEndAfter(s[i]),t.deleteContents());break}case p:{const{sortedIndices:t}=e,r=Array.from(s);o.append(...t.filter((e=>e<c)).map((e=>r[e])));break}}0==n&&i&&o.append(i)}}))}))}))},1827:(e,t,r)=>{function s(e){return e.replace(/(?<!^)(?=[A-Z])/g,"-").toLowerCase()}r.d(t,{cc:()=>s})},7080:(e,t,r)=>{r.d(t,{Y:()=>c});var s,n=r(9372),a=function(e,t,r,s){var n,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(i=(a<3?n(i):a>3?n(t,r,i):n(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},i=function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};let o=class extends HTMLElement{constructor(){super(),s.set(this,void 0),this.attachShadow({mode:"open"}).append((0,n.bG)("style",{children:['\n                        :host {\n                            display: inline-block;\n                            padding: 3px 4px;\n                            cursor: pointer;\n                            white-space: nowrap;\n                            border-radius: 4px;\n                            border: 1px solid black;\n                            user-select: none;\n                        }\n        \n                        :host([disabled]) {\n                            pointer-events: none;\n                            color: lightgray;\n                            border-color: lightgray;\n                        }\n        \n                        :host([selected]:active) {\n                            cursor: grabbing;\n                        }\n                        \n                        :host([selected]) {\n                            cursor: grab;\n                            font-weight: bold;\n                            outline: 1px auto black;\n                        }\n        \n                        :host([dragovered]) {\n                            border-style: dotted;\n                        }\n                        \n                        [part="container"] {\n                            display: flex;\n                            align-items: center;\n                        }\n                    ']}),(0,n.bG)("div",{attributes:{part:"container"},children:[(0,n.bG)("slot",{children:["&nbsp;"]})]})),this.references=[],i(this,s,null,"f")}get referee(){return function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)}(this,s,"f")}connectedCallback(){this.tabIndex=this.tabIndex,this.draggable=!0}disconnectedCallback(){if(this.referee){const e=this.referee.references.indexOf(this);e>-1&&this.referee.references.splice(e,1)}}getReference(){const e=this.cloneNode(!0);return i(e,s,this,"f"),e}};s=new WeakMap,a([(0,n.GF)({type:Boolean})],o.prototype,"selected",void 0),a([(0,n.GF)({type:Boolean})],o.prototype,"dragovered",void 0),a([(0,n.GF)({type:Boolean})],o.prototype,"dragged",void 0),a([(0,n.GF)({type:Boolean})],o.prototype,"disabled",void 0),o=a([(0,n.b_)({name:"e-draggable"})],o);var c=o},4041:(e,t,r)=>{r.d(t,{u:()=>h});var s,n,a=r(9372),i=r(7080),o=function(e,t,r,s){var n,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(i=(a<3?n(i):a>3?n(t,r,i):n(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},c=function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},d=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};let l=class extends HTMLElement{constructor(){super(),s.set(this,void 0),n.set(this,void 0),this.attachShadow({mode:"open"}).append((0,a.bG)("style",{children:['\n                        :host {\n                            display: block;\n                        }\n        \n                        :host([disabled]) {\n                            pointer-events: none;\n                        }\n        \n                        [part="container"] {\n                            position: relative;\n                            display: flex;\n                            flex-direction: column;\n                            padding-left: 2px;\n                            padding-right: 2px;\n                        }\n        \n                        ::slotted(*) {\n                            margin-top: 2px;\n                            margin-bottom: 2px;\n                        }\n                    ']}),(0,a.bG)("div",{attributes:{part:"container"},children:[(0,a.bG)("slot")]})),c(this,s,[],"f"),c(this,n,[],"f")}get draggables(){return d(this,s,"f")}get selectedDraggables(){return d(this,n,"f")}selectDraggable(e){this.selectedDraggables.includes(e)||this.selectedDraggables.push(e),e.selected||(e.selected=!0)}unselectDraggable(e){const t=this.selectedDraggables.indexOf(e);t>-1&&(e.selected&&(e.selected=!1),this.selectedDraggables.splice(t,1))}clearSelection(){this.selectedDraggables.forEach((e=>{e.selected=!1})),c(this,n,[],"f")}connectedCallback(){this.tabIndex=this.tabIndex;const e=this.shadowRoot?.querySelector("slot");e&&e.addEventListener("slotchange",(()=>{const t=e.assignedElements().filter((e=>e instanceof i.Y));c(this,s,t,"f"),this.draggables.forEach((e=>{e.draggable=!0}))})),this.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.clearSelection(),this.focus())})),this.addEventListener("dragstart",(e=>{const t=e.target;if(this.draggables.includes(t)){this.selectedDraggables.forEach((e=>{e.dragged=!0}));const t=e.dataTransfer;t&&(t.dropEffect="move",t.setData("text/plain",this.id))}})),this.addEventListener("dragleave",(e=>{const t=e.dataTransfer;t&&(t.dropEffect="none")})),this.addEventListener("dragend",(e=>{const t=e.target;this.draggables.includes(t)&&this.draggables.filter((e=>e.dragged)).forEach((e=>{e.dragged=!1}))})),this.addEventListener("focusout",(e=>{const t=e.relatedTarget;this.contains(t)||this.clearSelection()})),this.addEventListener("mousedown",(e=>{const t=e.target;if(0==e.button)if(this.draggables.includes(t))if(e.shiftKey||e.ctrlKey){if(e.ctrlKey)t.selected?this.unselectDraggable(t):this.selectDraggable(t);else if(e.shiftKey)if(this.selectedDraggables.length>0){const e=this.draggables.indexOf(t),r=this.draggables.indexOf(this.selectedDraggables[0]),s=Math.sign(e-r),n=s>0?0:this.draggables.length-1,a=s>0?this.draggables.length-1:0,i=s>0?r:e,o=s>0?e:r;for(let e=n;e!==a+s;e+=s)e>=i&&e<=o?this.selectDraggable(this.draggables[e]):this.unselectDraggable(this.draggables[e])}else this.selectDraggable(t)}else t.selected||(this.clearSelection(),this.selectDraggable(t));else this.clearSelection()})),this.addEventListener("mouseup",(e=>{const t=e.target;0==e.button&&this.draggables.includes(t)&&(e.shiftKey||e.ctrlKey||this.draggables.forEach((e=>{e!==t&&this.unselectDraggable(e)})))}))}};s=new WeakMap,n=new WeakMap,o([(0,a.GF)({type:Boolean})],l.prototype,"disabled",void 0),l=o([(0,a.b_)({name:"e-dragzone"})],l);var h=l},4141:(e,t,r)=>{r.d(t,{KY:()=>j});var s,n,a,i,o,c,d,l,h,p,g,f,u,v,b,m,y,w,E,T=function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},R=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};class x{constructor(e){this.target=e.target,this.changeType=e.changeType,this.propertyName=e.propertyName??null,this.oldValue=e.oldValue??void 0,this.newValue=e.newValue??void 0,this.removedIndex=e.removedIndex??0,this.removedItems=new S(e.removedItems??[]),this.insertedIndex=e.insertedIndex??0,this.insertedItems=new S(e.insertedItems??[]),this.sortedIndices=e.sortedIndices??[]}static get PROPERTY_CHANGE(){return 1}static get LIST_REMOVE(){return 2}static get LIST_INSERT(){return 3}static get LIST_SORT(){return 4}get PROPERTY_CHANGE(){return x.PROPERTY_CHANGE}get LIST_REMOVE(){return x.LIST_REMOVE}get LIST_INSERT(){return x.LIST_INSERT}get LIST_SORT(){return x.LIST_SORT}}var I=x;s=new WeakMap;var S=class{constructor(e){s.set(this,void 0),T(this,s,e.slice(),"f")}get length(){return R(this,s,"f").length}item(e){return R(this,s,"f")[e]??null}values(){return R(this,s,"f").values()}};class O{constructor(e){n.set(this,void 0),a.set(this,void 0),this.type=e,T(this,n,null,"f"),T(this,a,null,"f")}get currentTarget(){return R(this,n,"f")}get target(){return R(this,a,"f")}}n=new WeakMap,a=new WeakMap,O.ModelEventTargetAccessor=new class{setCurrentTarget(e,t){e instanceof O&&T(e,n,t,"f")}setTarget(e,t){e instanceof O&&T(e,a,t,"f")}};var k=O.ModelEventTargetAccessor;delete O.ModelEventTargetAccessor;var L=O;class P{constructor(){i.set(this,void 0),T(this,i,new Map,"f")}receiveEvent(e){const{type:t}=e,r=R(this,i,"f").get(t);k.setCurrentTarget(e,this),r&&r.forEach((t=>{t(e)}))}addEventListener(e,t){const r=R(this,i,"f").get(e);r?r.push(t):R(this,i,"f").set(e,[t])}removeEventListener(e,t){const r=R(this,i,"f").get(e);if(r){const s=r.findIndex((e=>e==t));s>-1&&r.splice(s,1),0==r.length&&R(this,i,"f").delete(e)}}dispatchEvent(e){k.setTarget(e,this),this.receiveEvent(e)}}i=new WeakMap;class A extends P{constructor(){super(),o.add(this),c.set(this,void 0),d.set(this,void 0),l.set(this,void 0),T(this,c,null,"f"),T(this,d,[],"f"),T(this,l,!1,"f")}get parentNode(){return R(this,c,"f")}setParent(e){if(null!==e){let t=e==this,{parentNode:r}=e;for(;!t&&null!==r;)({parentNode:r}=r),t=r==this;if(t)throw new TypeError("Failed to set parent on ModelNode: circular reference detected in the hierarchy.");T(this,c,e,"f")}else T(this,c,null,"f")}beginChanges(){T(this,l,!0,"f")}endChanges(){this.dispatchEvent(new L("modelchange")),R(this,d,"f").splice(0),T(this,l,!1,"f")}getRecords(){return R(this,d,"f").slice()}receiveEvent(e){super.receiveEvent(e);const{parentNode:t}=this;t&&t.receiveEvent(e)}}c=new WeakMap,d=new WeakMap,l=new WeakMap,o=new WeakSet,h=function(e,t,r){const s=R(this,d,"f"),n=new I({target:this,changeType:I.PROPERTY_CHANGE,propertyName:e,oldValue:t,newValue:r});s.push(n),R(this,l,"f")||(this.dispatchEvent(new L("modelchange")),s.splice(0))},p=function(e){R(this,d,"f").push(e),R(this,l,"f")||(this.dispatchEvent(new L("modelchange")),R(this,d,"f").splice(0))},A.ModelNodeRecordsAccessor=new class{triggerChange(e,t,r,s){e instanceof A&&R(e,o,"m",h).call(e,t,r,s)}handleRecord(e,t){e instanceof A&&R(e,o,"m",p).call(e,t)}};var M=A.ModelNodeRecordsAccessor;delete A.ModelNodeRecordsAccessor;var D=A;class C extends A{constructor(){super(),g.set(this,void 0),T(this,g,new Map,"f")}}g=new WeakMap,C.ModelObjectPropertiesAccessor=new class{setProperty(e,t,r){e instanceof C&&R(e,g,"f").set(t,r)}getProperty(e,t){if(e instanceof C)return R(e,g,"f").get(t)}},C.ModelObjectPropertiesAccessor,delete C.ModelObjectPropertiesAccessor,f=new WeakMap;var N=class extends A{constructor(e){super(),f.set(this,void 0),T(this,f,e?.slice()??[],"f")}setParent(e){super.setParent(e),R(this,f,"f").forEach((t=>{t.setParent(e)}))}get length(){return R(this,f,"f").length}get(e){return R(this,f,"f")[e]??null}index(e){return R(this,f,"f").indexOf(e)}values(){return R(this,f,"f").values()}sort(e){const t=R(this,f,"f").map(((e,t)=>({item:e,index:t})));t.sort(((t,r)=>e(t.item,r.item))),T(this,f,t.map((e=>e.item)),"f");const r=new I({target:this,changeType:I.LIST_SORT,sortedIndices:t.map((e=>e.index))});M.handleRecord(this,r)}prepend(...e){const t=R(this,f,"f"),{parentNode:r}=this;r&&e.forEach((e=>{e.setParent(r)})),t.splice(0,0,...e);const s=new I({target:this,changeType:I.LIST_INSERT,insertedIndex:0,insertedItems:e});M.handleRecord(this,s)}append(...e){const t=R(this,f,"f"),{length:r}=t,{parentNode:s}=this;s&&e.forEach((e=>{e.setParent(s)})),t.push(...e);const n=new I({target:this,changeType:I.LIST_INSERT,insertedIndex:r,insertedItems:e});M.handleRecord(this,n)}insert(e,...t){const r=R(this,f,"f"),{length:s}=r;if(Math.abs(e)<=s){if(e>=0){const{parentNode:n}=this;t.forEach((e=>{e.setParent(n)})),e<s?r.splice(e,0,...t):r.push(...t)}else if(e<0){e=s-e;const{parentNode:n}=this;n&&t.forEach((e=>{e.setParent(n)})),r.splice(e,0,...t)}const n=new I({target:this,changeType:I.LIST_INSERT,insertedIndex:e,insertedItems:t.slice()});M.handleRecord(this,n)}}remove(e){const t=R(this,f,"f"),r=t.indexOf(e);if(r>-1){const e=t.splice(r,1)[0],{parentNode:s}=this;s&&e.setParent(null);const n=new I({target:this,changeType:I.LIST_REMOVE,removedIndex:r,removedItems:[e]});M.handleRecord(this,n)}}clear(){const e=R(this,f,"f"),{length:t}=e;if(t>0){const t=e.splice(0),{parentNode:r}=this;r&&t.forEach((e=>{e.setParent(null)}));const s=new I({target:this,changeType:I.LIST_REMOVE,removedIndex:0,removedItems:t});M.handleRecord(this,s)}}};v=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakMap,u=new WeakSet,w=function(){const e=R(this,b,"f").splice(0);e.length>0&&R(this,v,"f").call(this,e)},E=function(e){if(!R(this,m,"f")){const{target:t,currentTarget:r}=e,s=R(this,y,"f").get(r);if(s){const{options:e}=s,{properties:n,propertiesFilter:a,childList:i,subtree:o}=e;o?n&&t instanceof D?(a?R(this,b,"f").push(...t.getRecords().filter((e=>{const{propertyName:t}=e;return a.includes(t)}))):R(this,b,"f").push(...t.getRecords()),R(this,u,"m",w).call(this)):i&&t instanceof N&&(R(this,b,"f").push(...t.getRecords()),R(this,u,"m",w).call(this)):t==r&&(n&&t instanceof D?(a?R(this,b,"f").push(...t.getRecords().filter((e=>{const{propertyName:t}=e;return a.includes(t)}))):R(this,b,"f").push(...t.getRecords()),R(this,u,"m",w).call(this)):i&&t instanceof N&&(R(this,b,"f").push(...t.getRecords()),R(this,u,"m",w).call(this)))}}};var j=class{constructor(e){u.add(this),v.set(this,void 0),b.set(this,void 0),m.set(this,void 0),y.set(this,void 0),T(this,v,e,"f"),T(this,b,[],"f"),T(this,m,!1,"f"),T(this,y,new WeakMap,"f")}observe(e,t){T(this,m,!1,"f");const r=R(this,y,"f");let s=r.get(e);if(s)r.set(e,s);else{const n=R(this,u,"m",E).bind(this);e.addEventListener("modelchange",n),s={listener:n,options:t},r.set(e,s)}}unobserve(e){let t=R(this,y,"f").get(e);if(t){const{listener:r}=t;e.removeEventListener("modelchange",r)}}disconnect(){R(this,b,"f").splice(0),T(this,m,!0,"f")}}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(9372),t=r(4041),s=function(e,t,r,s){var n,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(i=(a<3?n(i):a>3?n(t,r,i):n(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};let n=class extends t.u{constructor(){super(),this.shadowRoot.querySelector("style").append('\n            :host {\n                border: 1px dashed gray;\n            }\n\n            :host(:not([multiple]):not(:empty)) [part="appendarea"],\n            :host(:not(:empty):not([dragovered])) [part="appendarea"] {\n                display: none !important;\n            }\n\n            [part="appendarea"] {\n                display: block;\n                margin: 2px;\n                border-radius: 4px;\n                border: 1px dotted black;\n            }\n\n            :host(:not([dragovered="appendarea"])) [part="appendarea"] {\n                border-color: transparent;\n            }\n            \n            [part="placeholder"] {\n                display: inline-block;\n                color: grey;\n                pointer-events: none;\n                user-select: none;\n            }\n        '),this.shadowRoot.append((0,e.bG)("div",{attributes:{part:"appendarea"},children:[(0,e.bG)("span",{attributes:{part:"placeholder"},children:["&nbsp;"]})]})),this.droptest=null}connectedCallback(){super.connectedCallback();const e=this.shadowRoot.querySelector("[part='appendarea']");this.addEventListener("keydown",(e=>{"Delete"===e.key&&(this==e.target?this.removeDraggables():this.removeDraggables((e=>e.selected)),e.stopPropagation())})),this.addEventListener("dragover",(e=>{e.preventDefault()})),this.shadowRoot.addEventListener("dragover",(e=>{e.preventDefault()})),this.addEventListener("dragenter",(e=>{const t=e.target;this.draggables.includes(t)?(t.dragovered=!0,this.dragovered="draggable"):this.dragovered="self",e.preventDefault()})),this.shadowRoot.addEventListener("dragenter",(t=>{t.target==e&&(this.dragovered="appendarea"),t.preventDefault()})),this.addEventListener("dragleave",(t=>{const r=t.relatedTarget,s=t.target;(s==this||this.draggables.includes(s))&&(s==this?(e&&(this.dragovered="self"),this.draggables.includes(r)||(this.dragovered=null)):s.dragovered=!1),t.preventDefault()})),this.shadowRoot.addEventListener("dragleave",(t=>{t.target==e&&(this.dragovered="self"),t.preventDefault()})),this.addEventListener("drop",(e=>{const r=e.target;if(r==this||this.draggables.includes(r)){let s=this.draggables.length;r==this?this.dragovered=null:(r.dragovered=!1,s=this.draggables.indexOf(r));const n=e.dataTransfer;if(n){const e=n.getData("text/plain"),r=document.getElementById(e);if(r instanceof t.u){const e=r.selectedDraggables;e&&(e.forEach((e=>{e.dragged=!1})),r instanceof a&&r.removeDraggables((t=>e.includes(t))),r.clearSelection(),this.addDraggables(e,s))}}}this.dragovered=null,e.preventDefault()}))}attributeChangedCallback(e,t,r){switch(e){case"placeholder":{const e=this.shadowRoot.querySelector("[part='placeholder']");e&&(e.textContent=r);break}}}addDraggables(e,t){if(e.length>0){let r=!0;this.droptest&&(r=this.droptest(this,e));let s=[],n=-1;if(r)if(this.multiple)e.forEach((e=>{let r=e.getReference();t>-1&&t<this.draggables.length?(this.draggables[t].insertAdjacentElement("beforebegin",r),n=n<0?t:n):(this.appendChild(r),n=n<0?this.draggables.length-1:n),s.push(r)}));else{let t=e[0].getReference();this.draggables.length>0?this.replaceChild(t,this.draggables[0]):this.appendChild(t),s.push(t),n=0}const a=this.shadowRoot?.querySelector("slot");return a&&a.addEventListener("slotchange",(()=>{this.dispatchEvent(new CustomEvent("e_datachange",{bubbles:!0,detail:{action:"insert",draggables:s,position:n}}))}),{once:!0}),s}return null}removeDraggables(e=(()=>!0)){let t=this.draggables.filter(((t,r)=>e(t,r))),r=this.draggables.indexOf(t[0]);t.forEach((e=>{e.remove()}));const s=this.shadowRoot?.querySelector("slot");s&&s.addEventListener("slotchange",(()=>{this.dispatchEvent(new CustomEvent("e_datachange",{bubbles:!0,detail:{action:"remove",draggables:t,position:r}}))}),{once:!0})}};s([(0,e.GF)({type:String})],n.prototype,"name",void 0),s([(0,e.GF)({type:String})],n.prototype,"dragovered",void 0),s([(0,e.GF)({type:String,observed:!0})],n.prototype,"placeholder",void 0),s([(0,e.GF)({type:Boolean})],n.prototype,"multiple",void 0),n=s([(0,e.b_)({name:"e-dropzone"})],n);var a=n})()})();
//# sourceMappingURL=Dropzone.ts.js.map