var e={9372:(e,t,r)=>{r.d(t,{Dx:()=>a,GF:()=>i,N5:()=>f,bG:()=>c,b_:()=>o,ny:()=>g});var n=r(4141),s=r(1827);const i=function(e){return(t,r)=>{const{constructor:n}=t,{prototype:i}=n,o=String(r),{defaultValue:a=null,observed:c=!1,name:l=(0,s.cc)(o)}=e;if(c){const e=Reflect.get(n,"observedAttributes",n);Array.isArray(e)?e.push(l):Object.defineProperty(n,"observedAttributes",{value:[l],writable:!1})}const{type:h}=e;switch(h){case Boolean:Object.defineProperty(i,o,{get:function(){return this.hasAttribute(l)},set:function(e){e?this.setAttribute(l,""):this.removeAttribute(l)}});break;case Object:Object.defineProperty(i,o,{get:function(){const e=this.getAttribute(l);return null!==e?JSON.parse(e):a},set:function(e){null!==e?this.setAttribute(l,JSON.stringify(e)):this.removeAttribute(l)}});break;case Number:Object.defineProperty(i,o,{get:function(){const e=this.getAttribute(l);return null!==e?parseFloat(e):a},set:function(e){null!==e?this.setAttribute(l,e):this.removeAttribute(l)}});break;default:Object.defineProperty(i,o,{get:function(){const e=this.getAttribute(l);return null!==e?e:a},set:function(e){null!==e?this.setAttribute(l,e):this.removeAttribute(l)}})}}},o=function(e){return t=>{const{name:r,options:n}=e;return customElements.get(r)||customElements.define(r,t,n),t}};function a(...e){const t=document.createDocumentFragment();return t.append(...e),t}function c(e,t){if(t){const{options:r,attributes:n,dataset:i,children:o,listeners:a}=t,c=document.createElement(e,r);if(n&&Object.entries(n).forEach((([e,t])=>{void 0!==t&&("boolean"==typeof t?c.toggleAttribute((0,s.cc)(e),t):c.setAttribute((0,s.cc)(e),String(t)))})),i){const{dataset:e}=c;Object.keys(i).forEach((t=>{e[t]=String(i[t])}))}return o&&("function"==typeof o?o(c):"object"==typeof o&&"length"in o?c.append(...Array.from(o)):c.append(o)),a&&Object.entries(a).forEach((([e,t])=>{Array.isArray(t)?c.addEventListener(e,t[0],t[1]):c.addEventListener(e,t)})),c}return document.createElement(e)}const l=new WeakMap,h=new FinalizationRegistry((e=>{const{model:t,reactiveElement:r}=e,n=l.get(t);if(void 0!==n){const{reactiveElementsArray:e}=n;e.splice(e.indexOf(r),1)}})),d=new n.KY((e=>{e.forEach((e=>{const{target:t,propertyName:r,oldValue:n,newValue:s}=e,{reactiveElementsArray:i}=l.get(t);i.forEach((e=>{const{elementRef:t,react:i,properties:o}=e,a=t.deref();a&&o.includes(r)&&i(a,r,n,s)}))}))}));function f(e,t,r,n){const s={elementRef:new WeakRef(t),react:n,properties:r},i=l.get(e);if(h.register(t,{model:e,reactiveElement:s}),i){const{reactiveElementsArray:e,observerOptions:t}=i,{propertiesFilter:n}=t;e.push(s),t.propertiesFilter=n?n.concat(r.filter((e=>!n.includes(e)))):r.filter(((e,t,r)=>r.indexOf(e)===t))}else{const t={properties:!0,propertiesFilter:r},n=[s];l.set(e,{observerOptions:t,reactiveElementsArray:n}),d.observe(e,t)}return r.forEach((r=>{if(r in e){const s=Reflect.get(e,r,e);n(t,r,void 0,s)}})),t}const u=new WeakMap,p=new FinalizationRegistry((e=>{const{list:t,reactiveChildElement:r}=e,n=u.get(t);if(n){const{reactiveChildElementsArray:e}=n;e.splice(e.indexOf(r),1)}})),m=new n.KY((e=>{let t=null;Array.from(e.values()).forEach((e=>{const{target:r}=e,n=r,{length:s}=n,{reactiveChildElementsArray:i}=u.get(n);i.forEach((r=>{const{parentRef:n,mapping:i,placeholder:o}=r,a=n.deref();if(a){const{firstChild:r,children:n}=a,{length:c}=n;o&&s>0&&r==o&&a.removeChild(o);const{changeType:l,LIST_INSERT:h,LIST_REMOVE:d,LIST_SORT:f}=e;switch(l){case h:{const{insertedIndex:t,insertedItems:r}=e,s=Array.from(r.values()).map(i),{length:o}=n;t<o?n[t].before(...s):a.append(...s);break}case d:{const{removedIndex:r,removedItems:s}=e,{length:i}=s;t=t??document.createRange();const o=r+(i-1);o<c&&(t.setStartBefore(n[r]),t.setEndAfter(n[o]),t.deleteContents());break}case f:{const{sortedIndices:t}=e,r=Array.from(n);a.append(...t.filter((e=>e<c)).map((e=>r[e])));break}}0==s&&o&&a.append(o)}}))}))}));function g(e,t,r){return n=>{const s=new WeakRef(n),i=u.get(e),o={parentRef:s,mapping:t,placeholder:r};if(p.register(n,{list:e,reactiveChildElement:o}),i){const{reactiveChildElementsArray:e}=i;e.push(o)}else{const t=[o];u.set(e,{reactiveChildElementsArray:t}),m.observe(e,{childList:!0})}const a=0==e.length&&r?[r]:Array.from(e.values()).map(t);n.replaceChildren(...a)}}},1827:(e,t,r)=>{function n(e){return e.replace(/(?<!^)(?=[A-Z])/g,"-").toLowerCase()}r.d(t,{cc:()=>n})},4141:(e,t,r)=>{r.d(t,{KY:()=>G,TO:()=>L,bn:()=>j,t0:()=>D});var n,s,i,o,a,c,l,h,d,f,u,p,m,g,v,b,w,y,E,I=function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},T=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class R{constructor(e){this.target=e.target,this.changeType=e.changeType,this.propertyName=e.propertyName??null,this.oldValue=e.oldValue??void 0,this.newValue=e.newValue??void 0,this.removedIndex=e.removedIndex??0,this.removedItems=new A(e.removedItems??[]),this.insertedIndex=e.insertedIndex??0,this.insertedItems=new A(e.insertedItems??[]),this.sortedIndices=e.sortedIndices??[]}static get PROPERTY_CHANGE(){return 1}static get LIST_REMOVE(){return 2}static get LIST_INSERT(){return 3}static get LIST_SORT(){return 4}get PROPERTY_CHANGE(){return R.PROPERTY_CHANGE}get LIST_REMOVE(){return R.LIST_REMOVE}get LIST_INSERT(){return R.LIST_INSERT}get LIST_SORT(){return R.LIST_SORT}}var S=R;n=new WeakMap;var A=class{constructor(e){n.set(this,void 0),I(this,n,e.slice(),"f")}get length(){return T(this,n,"f").length}item(e){return T(this,n,"f")[e]??null}values(){return T(this,n,"f").values()}};class x{constructor(e){s.set(this,void 0),i.set(this,void 0),this.type=e,I(this,s,null,"f"),I(this,i,null,"f")}get currentTarget(){return T(this,s,"f")}get target(){return T(this,i,"f")}}s=new WeakMap,i=new WeakMap,x.ModelEventTargetAccessor=new class{setCurrentTarget(e,t){e instanceof x&&I(e,s,t,"f")}setTarget(e,t){e instanceof x&&I(e,i,t,"f")}};var O=x.ModelEventTargetAccessor;delete x.ModelEventTargetAccessor;var M=x;class N{constructor(){o.set(this,void 0),I(this,o,new Map,"f")}receiveEvent(e){const{type:t}=e,r=T(this,o,"f").get(t);O.setCurrentTarget(e,this),r&&r.forEach((t=>{t(e)}))}addEventListener(e,t){const r=T(this,o,"f").get(e);r?r.push(t):T(this,o,"f").set(e,[t])}removeEventListener(e,t){const r=T(this,o,"f").get(e);if(r){const n=r.findIndex((e=>e==t));n>-1&&r.splice(n,1),0==r.length&&T(this,o,"f").delete(e)}}dispatchEvent(e){O.setTarget(e,this),this.receiveEvent(e)}}o=new WeakMap;class P extends N{constructor(){super(),a.add(this),c.set(this,void 0),l.set(this,void 0),h.set(this,void 0),I(this,c,null,"f"),I(this,l,[],"f"),I(this,h,!1,"f")}get parentNode(){return T(this,c,"f")}setParent(e){if(null!==e){let t=e==this,{parentNode:r}=e;for(;!t&&null!==r;)({parentNode:r}=r),t=r==this;if(t)throw new TypeError("Failed to set parent on ModelNode: circular reference detected in the hierarchy.");I(this,c,e,"f")}else I(this,c,null,"f")}beginChanges(){I(this,h,!0,"f")}endChanges(){this.dispatchEvent(new M("modelchange")),T(this,l,"f").splice(0),I(this,h,!1,"f")}getRecords(){return T(this,l,"f").slice()}receiveEvent(e){super.receiveEvent(e);const{parentNode:t}=this;t&&t.receiveEvent(e)}}c=new WeakMap,l=new WeakMap,h=new WeakMap,a=new WeakSet,d=function(e,t,r){const n=T(this,l,"f"),s=new S({target:this,changeType:S.PROPERTY_CHANGE,propertyName:e,oldValue:t,newValue:r});n.push(s),T(this,h,"f")||(this.dispatchEvent(new M("modelchange")),n.splice(0))},f=function(e){T(this,l,"f").push(e),T(this,h,"f")||(this.dispatchEvent(new M("modelchange")),T(this,l,"f").splice(0))},P.ModelNodeRecordsAccessor=new class{triggerChange(e,t,r,n){e instanceof P&&T(e,a,"m",d).call(e,t,r,n)}handleRecord(e,t){e instanceof P&&T(e,a,"m",f).call(e,t)}};var C=P.ModelNodeRecordsAccessor;delete P.ModelNodeRecordsAccessor;var k=P;const L=function(){return(e,t)=>{const{constructor:r}=e,{prototype:n}=r;Object.defineProperty(n,t,{set:function(e){const r=_.getProperty(this,t);return _.setProperty(this,t,e),e!==r&&C.triggerChange(this,t,r,e),!0},get:function(){return _.getProperty(this,t)},enumerable:!0})}};class W extends P{constructor(){super(),u.set(this,void 0),I(this,u,new Map,"f")}}u=new WeakMap,W.ModelObjectPropertiesAccessor=new class{setProperty(e,t,r){e instanceof W&&T(e,u,"f").set(t,r)}getProperty(e,t){if(e instanceof W)return T(e,u,"f").get(t)}};var _=W.ModelObjectPropertiesAccessor;delete W.ModelObjectPropertiesAccessor;var j=W;p=new WeakMap;var D=class extends P{constructor(e){super(),p.set(this,void 0),I(this,p,e?.slice()??[],"f")}setParent(e){super.setParent(e),T(this,p,"f").forEach((t=>{t.setParent(e)}))}get length(){return T(this,p,"f").length}get(e){return T(this,p,"f")[e]??null}index(e){return T(this,p,"f").indexOf(e)}values(){return T(this,p,"f").values()}sort(e){const t=T(this,p,"f").map(((e,t)=>({item:e,index:t})));t.sort(((t,r)=>e(t.item,r.item))),I(this,p,t.map((e=>e.item)),"f");const r=new S({target:this,changeType:S.LIST_SORT,sortedIndices:t.map((e=>e.index))});C.handleRecord(this,r)}prepend(...e){const t=T(this,p,"f"),{parentNode:r}=this;r&&e.forEach((e=>{e.setParent(r)})),t.splice(0,0,...e);const n=new S({target:this,changeType:S.LIST_INSERT,insertedIndex:0,insertedItems:e});C.handleRecord(this,n)}append(...e){const t=T(this,p,"f"),{length:r}=t,{parentNode:n}=this;n&&e.forEach((e=>{e.setParent(n)})),t.push(...e);const s=new S({target:this,changeType:S.LIST_INSERT,insertedIndex:r,insertedItems:e});C.handleRecord(this,s)}insert(e,...t){const r=T(this,p,"f"),{length:n}=r;if(Math.abs(e)<=n){if(e>=0){const{parentNode:s}=this;t.forEach((e=>{e.setParent(s)})),e<n?r.splice(e,0,...t):r.push(...t)}else if(e<0){e=n-e;const{parentNode:s}=this;s&&t.forEach((e=>{e.setParent(s)})),r.splice(e,0,...t)}const s=new S({target:this,changeType:S.LIST_INSERT,insertedIndex:e,insertedItems:t.slice()});C.handleRecord(this,s)}}remove(e){const t=T(this,p,"f"),r=t.indexOf(e);if(r>-1){const e=t.splice(r,1)[0],{parentNode:n}=this;n&&e.setParent(null);const s=new S({target:this,changeType:S.LIST_REMOVE,removedIndex:r,removedItems:[e]});C.handleRecord(this,s)}}clear(){const e=T(this,p,"f"),{length:t}=e;if(t>0){const t=e.splice(0),{parentNode:r}=this;r&&t.forEach((e=>{e.setParent(null)}));const n=new S({target:this,changeType:S.LIST_REMOVE,removedIndex:0,removedItems:t});C.handleRecord(this,n)}}};g=new WeakMap,v=new WeakMap,b=new WeakMap,w=new WeakMap,m=new WeakSet,y=function(){const e=T(this,v,"f").splice(0);e.length>0&&T(this,g,"f").call(this,e)},E=function(e){if(!T(this,b,"f")){const{target:t,currentTarget:r}=e,n=T(this,w,"f").get(r);if(n){const{options:e}=n,{properties:s,propertiesFilter:i,childList:o,subtree:a}=e;a?s&&t instanceof k?(i?T(this,v,"f").push(...t.getRecords().filter((e=>{const{propertyName:t}=e;return i.includes(t)}))):T(this,v,"f").push(...t.getRecords()),T(this,m,"m",y).call(this)):o&&t instanceof D&&(T(this,v,"f").push(...t.getRecords()),T(this,m,"m",y).call(this)):t==r&&(s&&t instanceof k?(i?T(this,v,"f").push(...t.getRecords().filter((e=>{const{propertyName:t}=e;return i.includes(t)}))):T(this,v,"f").push(...t.getRecords()),T(this,m,"m",y).call(this)):o&&t instanceof D&&(T(this,v,"f").push(...t.getRecords()),T(this,m,"m",y).call(this)))}}};var G=class{constructor(e){m.add(this),g.set(this,void 0),v.set(this,void 0),b.set(this,void 0),w.set(this,void 0),I(this,g,e,"f"),I(this,v,[],"f"),I(this,b,!1,"f"),I(this,w,new WeakMap,"f")}observe(e,t){I(this,b,!1,"f");const r=T(this,w,"f");let n=r.get(e);if(n)r.set(e,n);else{const s=T(this,m,"m",E).bind(this);e.addEventListener("modelchange",s),n={listener:s,options:t},r.set(e,n)}}unobserve(e){let t=T(this,w,"f").get(e);if(t){const{listener:r}=t;e.removeEventListener("modelchange",r)}}disconnect(){T(this,v,"f").splice(0),I(this,b,!0,"f")}}},1234:(e,t,r)=>{r.d(t,{G:()=>a});var n,s=function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},i=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class o extends HTMLElement{constructor(){super(),n.set(this,void 0),s(this,n,null,"f")}get model(){return i(this,n,"f")}setModel(e){e!==i(this,n,"f")&&s(this,n,e,"f")}renderLight(){}renderShadow(){}render(){const{shadowRoot:e}=this;if(null!==e){const t=this.renderShadow();t&&e.replaceChildren(t)}const t=this.renderLight();t&&this.replaceChildren(t)}}n=new WeakMap;var a=o}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};(()=>{r.d(n,{A6:()=>T,LQ:()=>A,R2:()=>R,rv:()=>I});var e,t,s,i,o,a,c,l,h,d,f,u,p,m,g,v=r(9372),b=r(4141),w=r(1234),y=function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},E=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class I extends b.bn{constructor(r){super(),e.add(this);const{items:n=[],sortFunction:s}=r??{};n.forEach(((e,t)=>e.index=t));const i=new b.t0(n);i.setParent(this),this.childItems=i,this.items=new b.t0(this.subtreeItems()),this.sortFunction=s??function(e,t){return e.name.localeCompare(t.name)},this.addEventListener("modelchange",E(this,e,"m",t).bind(this))}subtreeItems(){const{childItems:e}=this;return Array.from(e.values()).flatMap((e=>Array.of(e,...e.subtreeItems())))}getItemByUri(e){const{childItems:t}=this,{length:r}=t,{length:n}=e;for(let s=0;s<r;s++){const r=t.get(s),{uri:i}=r,{length:o}=i;if(e.startsWith(i))return o===n?r:I.prototype.getItemByUri.call(r,e)}return null}}e=new WeakSet,t=function(e){const{target:t}=e,{items:r,sortFunction:n,subtreeItems:s}=this;t instanceof b.t0&&(t.getRecords().forEach((e=>{const{insertedItems:t,removedItems:i}=e,o=Array.from(t.values()).flatMap((e=>Array.of(e,...s.call(e)))),a=Array.from(i.values()).flatMap((e=>Array.of(e,...s.call(e))));r.beginChanges(),r.append(...o),a.forEach((e=>r.remove(e))),n&&r.sort(n),r.endChanges()})),Array.from(t.values()).forEach(((e,t)=>{e.index=t})))};class T{constructor(e){this.items=e}get count(){return this.items.length}remove(){const{items:e}=this,t=e.reduce(((e,t)=>{const{parentNode:r}=t;if(r instanceof R||r instanceof I){const{childItems:n}=r,s=e.get(n);s?s.push(t):e.set(n,[t])}return e}),new Map);Array.from(t.entries()).forEach((([e,t])=>{e.beginChanges(),t.forEach((t=>{e.remove(t)})),e.endChanges()}))}}class R extends b.bn{constructor(e){super();const{name:t,type:r,items:n=[]}=e;n.forEach(((e,t)=>e.index=t));const s=new b.t0(n);s.setParent(this),this.name=t,this.childItems=s,this.type=r,this.index=-1}get level(){const{parentNode:e}=this;return e instanceof R?e.level+1:0}get uri(){const{parentNode:e,name:t}=this;return e instanceof R?`${e.uri}${t}/`:`${t}/`}get parentItem(){const{parentNode:e}=this;return e instanceof R?e:null}subtreeItems(){const{childItems:e}=this;return Array.from(e.values()).flatMap((e=>Array.of(e,...e.subtreeItems())))}remove(){const{parentNode:e}=this;if(e instanceof R||e instanceof I){const{childItems:t}=e;t&&t.remove(this)}}}y([(0,b.TO)()],R.prototype,"name",void 0),y([(0,b.TO)()],R.prototype,"type",void 0),y([(0,b.TO)()],R.prototype,"index",void 0);let S=class extends w.G{constructor(e){super(),s.add(this),i.set(this,void 0),function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?s.call(e,r):s?s.value=r:t.set(e,r)}(this,i,new WeakMap,"f");const t=this.attachShadow({mode:"open"}),r=new CSSStyleSheet;r.replace(g),t.adoptedStyleSheets=[r],this.setModel(e??new I)}attributeChangedCallback(e,t,r){switch(e){case"draggable":{const{treeElement:e}=this;e&&Array.from(e.items).forEach((e=>e.draggable=null!==r));break}}}get treeElement(){return this.shadowRoot.querySelector("e-tree")}treeItemElement(e){return this.shadowRoot.querySelector(`e-treeitem[uri=${e.uri}]`)}treeItem(e){return this.model.getItemByUri(E(this,s,"m",o).call(this,e))}renderShadow(){const{model:e}=this,t=(0,v.bG)("e-tree",{attributes:{tabindex:0},children:(0,v.ny)(e.childItems,(e=>E(this,s,"m",c).call(this,e))),listeners:{dragstart:E(this,s,"m",h).bind(this),drop:E(this,s,"m",d).bind(this),contextmenu:E(this,s,"m",f).bind(this),focus:E(this,s,"m",u).bind(this),focusin:E(this,s,"m",p).bind(this),focusout:E(this,s,"m",m).bind(this)}});return(0,v.Dx)(t,(0,v.bG)("slot"),(0,v.bG)("div",{attributes:{class:"offscreen",hidden:!0},children:(0,v.ny)(e.items,(e=>E(this,s,"m",l).call(this,e)))}))}itemContentDelegate(e){return(0,v.N5)(e,(0,v.bG)("span"),["name"],((e,t,r,n)=>{e.textContent=n}))}itemToolbarDelegate(e){return null}itemMenuDelegate(){return null}selectedItems(){const{treeElement:e}=this;return e?e.selectedItems().map((e=>this.treeItem(e))):[]}activeItem(){const{treeElement:e}=this;if(e){const{activeItem:t}=e;return t?this.treeItem(t):null}return null}};i=new WeakMap,s=new WeakSet,o=function(e){let t="",r=e;for(;null!==r;){const{dataset:e,parentElement:n}=r,{name:s}=e;t=`${s}/`+t,r=n?.closest("e-treeitem")??null}return t},a=function(e){return E(this,i,"f").get(e)?.deref()??null},c=function e(t){const{draggable:r}=this,{index:n,level:i,name:o}=t,a=this.itemToolbarDelegate(t),c=this.itemContentDelegate(t),l=(0,v.N5)(t,(0,v.bG)("e-treeitem",{attributes:{draggable:String(r),posinset:n,level:i},dataset:{name:o},children:[...c?[c]:[],...a?[a]:[]]}),["index","name","type"],((r,n,i,o)=>{switch(n){case"index":r.posinset=o;break;case"name":{const{dataset:e}=r;e.name=o;break}case"type":switch(r.type=o,o){case"parent":r.append((0,v.bG)("e-treeitemgroup",{attributes:{slot:"group"},children:(0,v.ny)(t.childItems,(t=>E(this,s,"m",e).call(this,t)))}));break;case"leaf":{const{group:e}=r;e&&e.remove();break}}}}));return l},l=function(e){const t=(0,v.N5)(e,(0,v.bG)("span",{attributes:{class:"dragimage"}}),["name"],((e,t,r,n)=>{e.textContent=n}));return E(this,i,"f").set(e,new WeakRef(t)),t},h=function(e){const{currentTarget:t,target:r}=e,n=t,i=r.closest("e-treeitem"),{model:c}=this;if(i){const{dataTransfer:t}=e,r=n.selectedItems(),{length:i}=r;if(i>0){const e=r.map((e=>E(this,s,"m",o).call(this,e))).filter(((e,t,r)=>!r.some((t=>e.startsWith(`${t}/`))))),n=e.join("\n"),i=e[e.length-1],l=c.getItemByUri(i);if(l&&t){t.dropEffect="move",t.setData("text/plain",n);const e=E(this,s,"m",a).call(this,l);e&&t.setDragImage(e,-16,0)}}}},d=function(e){const{currentTarget:t,target:r}=e,n=t,i=r.closest("e-treeitem"),{model:a}=this,{sortFunction:c}=a;if(i){const{dataTransfer:t}=e;if(t){const e=E(this,s,"m",o).call(this,i),r=a.getItemByUri(e),l=t.getData("text/plain").split("\n");if(!l.some((t=>e.startsWith(`${t}/`)||t===e))){const e=l.map((e=>a.getItemByUri(e))).filter((e=>null!==e)),{type:t,parentItem:s}=r,{childItems:o}="parent"===t?r:s||a;Array.from(o.values()).forEach((t=>{const r=e.findIndex((e=>e.name===t.name));r>-1&&(confirm(`Replace ${t.name}?`)?o.remove(t):(e.copyWithin(r,r+1),e.length--))})),new T(e).remove(),c?(o.beginChanges(),o.append(...e),o.sort(c),o.endChanges()):o.insert(i.posinset,...e);const h=n.querySelectorAll(`e-treeitem:is(${e.map((e=>`[data-uri="${e.uri}"]`)).join(",")})`);n.beginSelection(),h.forEach((e=>e.selected=!0)),n.endSelection()}}}},f=function(e){const{clientX:t,clientY:r,currentTarget:n,target:s}=e,i=n,o=s.closest("e-treeitem");if(o){const e=this.itemMenuDelegate();null!==e&&(e.contextual=!0,e.addEventListener("close",(()=>{o.focus({preventScroll:!0})})),i.append(e),e.positionContextual(t,r),e.focus({preventScroll:!0}))}e.preventDefault()},u=function(e){const{currentTarget:t,relatedTarget:r}=e,n=t;if(null!==r&&!this.contains(r)){const t=r.compareDocumentPosition(this);if(!(t&Node.DOCUMENT_POSITION_DISCONNECTED)&&t&Node.DOCUMENT_POSITION_PRECEDING){const{activeItem:t}=n;if(t){const r=t.querySelector("e-toolbar");r&&(e.preventDefault(),r.focus())}}}},p=function(e){const{target:t}=e,r=t.closest("e-treeitem");if(r){const e=r.querySelector("e-toolbar");e&&(e.tabIndex=e.contains(t)?-1:0)}},m=function(e){const{target:t}=e,r=t.closest("e-treeitem");if(r){const e=r.querySelector("e-toolbar");e&&(e.tabIndex=e.contains(t)?0:-1)}},g="\n            :host {\n                display: block;\n            }\n            \n            .offscreen {\n                position: absolute;\n                top: 0;\n                left: 0;\n                transform: translateY(-100%);\n                display: block;\n                pointer-events: none;\n            }\n            \n            .dragimage {\n                white-space: nowrap;\n                margin: 1px;\n                display: inline-block;\n                outline: 1px solid var(--focused-item-outline-color);\n                outline-offset: -1px;\n                border-radius: 3px; \n                padding: 2px 4px;\n            }\n        ",y([(0,v.GF)({type:Boolean,observed:!0})],S.prototype,"draggable",void 0),S=y([(0,v.b_)({name:"e-treeview"})],S);var A=S})();var s=n.R2,i=n.A6,o=n.rv,a=n.LQ;export{s as TreeItemModel,i as TreeItemModelList,o as TreeModel,a as TreeView};
//# sourceMappingURL=TreeView.js.map