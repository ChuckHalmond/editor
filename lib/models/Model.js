(()=>{"use strict";var e,t,s,r,n,i,a,o,c,h,d,l,f,u=function(e,t,s,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,s):n?n.value=s:t.set(e,s),s},p=function(e,t,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)};class w{constructor(e){this.target=e.target,this.changeType=e.changeType,this.propertyName=e.propertyName??null,this.oldValue=e.oldValue??void 0,this.newValue=e.newValue??void 0,this.removedIndex=e.removedIndex??0,this.removedItems=new g(e.removedItems??[]),this.insertedIndex=e.insertedIndex??0,this.insertedItems=new g(e.insertedItems??[]),this.sortedIndices=e.sortedIndices??[]}static get PROPERTY_CHANGE(){return 1}static get LIST_REMOVE(){return 2}static get LIST_INSERT(){return 3}static get LIST_SORT(){return 4}get PROPERTY_CHANGE(){return w.PROPERTY_CHANGE}get LIST_REMOVE(){return w.LIST_REMOVE}get LIST_INSERT(){return w.LIST_INSERT}get LIST_SORT(){return w.LIST_SORT}}var v=w;e=new WeakMap;var g=class{constructor(t){e.set(this,void 0),u(this,e,t.slice(),"f")}get length(){return p(this,e,"f").length}item(t){return p(this,e,"f")[t]??null}values(){return p(this,e,"f").values()}};class E{constructor(e){t.set(this,void 0),s.set(this,void 0),this.type=e,u(this,t,null,"f"),u(this,s,null,"f")}get currentTarget(){return p(this,t,"f")}get target(){return p(this,s,"f")}}t=new WeakMap,s=new WeakMap,E.ModelEventTargetAccessor=new class{setCurrentTarget(e,s){e instanceof E&&u(e,t,s,"f")}setTarget(e,t){e instanceof E&&u(e,s,t,"f")}};var T=E.ModelEventTargetAccessor;delete E.ModelEventTargetAccessor;var M=E;class m{constructor(){r.set(this,void 0),u(this,r,new Map,"f")}receiveEvent(e){const{type:t}=e,s=p(this,r,"f").get(t);T.setCurrentTarget(e,this),s&&s.forEach((t=>{t(e)}))}addEventListener(e,t){const s=p(this,r,"f").get(e);s?s.push(t):p(this,r,"f").set(e,[t])}removeEventListener(e,t){const s=p(this,r,"f").get(e);if(s){const n=s.findIndex((e=>e==t));n>-1&&s.splice(n,1),0==s.length&&p(this,r,"f").delete(e)}}dispatchEvent(e){T.setTarget(e,this),this.receiveEvent(e)}}r=new WeakMap;class I extends m{constructor(){super(),n.add(this),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),u(this,i,null,"f"),u(this,a,[],"f"),u(this,o,!1,"f")}get parentNode(){return p(this,i,"f")}setParent(e){if(null!==e){let t=e==this,{parentNode:s}=e;for(;!t&&null!==s;)({parentNode:s}=s),t=s==this;if(t)throw new TypeError("Failed to set parent on ModelNode: circular reference detected in the hierarchy.");u(this,i,e,"f")}else u(this,i,null,"f")}beginChanges(){u(this,o,!0,"f")}endChanges(){this.dispatchEvent(new M("modelchange")),p(this,a,"f").splice(0),u(this,o,!1,"f")}getRecords(){return p(this,a,"f").slice()}receiveEvent(e){super.receiveEvent(e);const{parentNode:t}=this;t&&t.receiveEvent(e)}}i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,c=function(e,t,s){const r=p(this,a,"f"),n=new v({target:this,changeType:v.PROPERTY_CHANGE,propertyName:e,oldValue:t,newValue:s});r.push(n),p(this,o,"f")||(this.dispatchEvent(new M("modelchange")),r.splice(0))},h=function(e){p(this,a,"f").push(e),p(this,o,"f")||(this.dispatchEvent(new M("modelchange")),p(this,a,"f").splice(0))},I.ModelNodeRecordsAccessor=new class{triggerChange(e,t,s,r){e instanceof I&&p(e,n,"m",c).call(e,t,s,r)}handleRecord(e,t){e instanceof I&&p(e,n,"m",h).call(e,t)}};I.ModelNodeRecordsAccessor;delete I.ModelNodeRecordsAccessor;class R extends I{constructor(){super(),d.set(this,void 0),u(this,d,new Map,"f")}}d=new WeakMap,R.ModelObjectPropertiesAccessor=new class{setProperty(e,t,s){e instanceof R&&p(e,d,"f").set(t,s)}getProperty(e,t){if(e instanceof R)return p(e,d,"f").get(t)}},R.ModelObjectPropertiesAccessor,delete R.ModelObjectPropertiesAccessor,new WeakMap;l=new WeakMap,f=new WeakMap,new WeakMap,new WeakMap,new WeakSet})();
//# sourceMappingURL=Model.js.map